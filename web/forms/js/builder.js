var active_element=null,sidebar_scroll_pos=null;function isScrolledIntoView(e){var t=$(window).scrollTop(),a=t+$(window).height(),i=$(e).offset().top;return t<=i+$(e).height()&&i<=a}function is_support_html5_uploader(){return!!(window.File&&window.FileList&&window.Blob&&(window.FileReader||window.FormData))}function save_form(){$("#bottom_bar_msg").text("Please wait... Saving...");var e=$("#form_header").data("form_properties").id,t=$("#form_header").data("form_properties");t.frame_height=$("#form_container").outerHeight();var a,i=$("#li_lastpage").data("field_properties"),_=$("#form_builder_sortable > li.dblive").not(".synched").not(".li_pagination");1<=_.length&&(a=new Array,_.each(function(e){a[e]=$(this).data("field_properties")}));var n=$("#form_builder_sortable").sortable("serialize",{key:"el_pos[]"}),_=$("#content").data("csrftoken");$.ajax({type:"POST",async:!0,url:"save_form.php",data:{form_id:e,csrf_token:_,fp:t,ep:a,el_pos:n,lp:i},cache:!1,global:!1,dataType:"json",error:function(e,t,a){alert("Error while saving. Error Message:\n"+e.responseText)},success:function(e){"ok"==e.status?($("#bottom_bar_loader").remove(),$("#bottom_bar_msg").hide(),$(".form_editor").data("form_saved",!0),$("#dialog-form-saved").dialog("open")):alert("Error while saving. Error Message:\n"+e)}})}function select_form_header(e){var t,a,i,_,n,o=$("#form_header").data("form_properties");$("#"+active_element).removeClass("highlighted"),active_element=null,$("#form_header .highlighted").removeClass("highlighted"),$("#pagination_header").removeClass("highlighted"),$("#"+e).addClass("highlighted"),$("#selected_field_image").css("visibility","hidden"),$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),2!=$("#builder_tabs").tabs("option","selected")&&$("#builder_tabs").tabs("select",2),1==$("#form_header").data("coming_from_click")&&(t=$("#content").position().top-2,$("#sidebar").position().top>t&&$("#sidebar").css("top",t)),$("#form_header").data("coming_from_click",0),$("#all_form_properties > li").hide(),"pagination_header"==e?(("steps"==o.pagination_type?$("#pagination_style_steps"):"percentage"==o.pagination_type?$("#pagination_style_percentage"):$("#pagination_style_disabled")).prop("checked",!0),$("#prop_pagination_style").show(),$("#pagination_title_list > li").remove(),t=$("#form_builder_sortable > li.page_break"),a="",i=1,t.each(function(e){var t=$(this);a+='<li><label for="pagetitleinput_'+i+'">'+i+'.</label><input type="text" value="'+t.data("field_properties").page_title+'" autocomplete="off" class="text" id="pagetitleinput_'+i+'" /></li>',i++}),$("#pagination_title_list").append(a),"disabled"==o.pagination_type?$("#prop_pagination_titles").hide():$("#prop_pagination_titles").show()):($("#all_form_properties .form_prop").show(),1==$("#form_prop_toggle_a").data("expand")?($("#form_prop_toggle_a").text("show less options"),$("#all_form_properties .advanced_prop").show()):($("#form_prop_toggle_a").text("show more options"),$("#all_form_properties .advanced_prop").hide()),1==$("#form_review").prop("checked")&&1==$("#form_prop_toggle_a").data("expand")?$("#form_prop_review").show():$("#form_prop_review").hide(),1==$("#form_resume").prop("checked")&&1==$("#form_prop_toggle_a").data("expand")?$("#form_prop_resume").show():$("#form_prop_resume").hide(),1==$("#form_allow_edit_completed_entry").prop("checked")&&1==$("#form_prop_toggle_a").data("expand")?$("#div_form_allow_edit_completed_entry").show():$("#div_form_allow_edit_completed_entry").hide(),$("#form_title").val(o.name),$("#form_description").val(o.description),$("#form_label_alignment").val(o.label_alignment),$("#form_language").val(o.language),("form_header_title"==e?$("#form_title"):$("#form_description")).focus().select(),$("#form_success_message").val(o.success_message),$("#form_redirect_url").val(o.redirect),1==o.redirect_enable?($("#form_redirect_option").prop("checked",!0),$("#form_success_message_option").prop("checked",!1),$("#form_success_message").hide(),$("#form_redirect_url").show()):($("#form_redirect_option").prop("checked",!1),$("#form_success_message_option").prop("checked",!0),$("#form_success_message").show(),$("#form_redirect_url").hide()),1==o.review?$("#form_review").prop("checked",!0):$("#form_review").prop("checked",!1),1==o.entry_edit_resend_notifications?$("#form_resend_notifications").prop("checked",!0):$("#form_resend_notifications").prop("checked",!1),1==o.entry_edit_hide_editlink?$("#form_hide_editlink").prop("checked",!0):$("#form_hide_editlink").prop("checked",!1),1==o.entry_edit_rerun_logics?$("#form_reprocess_logics").prop("checked",!0):$("#form_reprocess_logics").prop("checked",!1),1==o.entry_edit_auto_disable?$("#form_disable_editing_enable").prop("checked",!0):$("#form_disable_editing_enable").prop("checked",!1),$("#form_disable_editing_value").val(o.entry_edit_auto_disable_period),$("#form_disable_editing_period").val(o.entry_edit_auto_disable_unit),1==o.entry_edit_enable?$("#form_allow_edit_completed_entry").prop("checked",!0):$("#form_allow_edit_completed_entry").prop("checked",!1),0<$("#pagination_header").length?1==o.resume_enable?$("#form_resume").prop("checked",!0):$("#form_resume").prop("checked",!1):(o.resume_enable=0,$("#form_resume").prop("checked",!1),$("#form_resume").prop("disabled",!0)),$("#form_review_title").val(o.review_title),$("#form_review_description").val(o.review_description),$("#review_primary_text").val(o.review_primary_text),$("#review_secondary_text").val(o.review_secondary_text),$("#review_primary_img").val(o.review_primary_img),$("#review_secondary_img").val(o.review_secondary_img),1==o.review_use_image?($("#form_review_use_text").prop("checked",!1),$("#form_review_use_image").prop("checked",!0),$("#div_review_use_image").show(),$("#div_review_use_text").hide()):($("#form_review_use_text").prop("checked",!0),$("#form_review_use_image").prop("checked",!1),$("#div_review_use_image").hide(),$("#div_review_use_text").show()),$("#form_resume_subject").val(o.resume_subject),$("#form_resume_content").val(o.resume_content),$("#form_resume_from_name").val(o.resume_from_name),$("#form_resume_from_email_address").val(o.resume_from_email_address),0<o.password.length?($("#form_password_option").prop("checked",!0),$("#form_password").show(),$("#form_password_data").val(o.password)):($("#form_password_option").prop("checked",!1),$("#form_password").hide(),$("#form_password_data").val("")),$("#form_limit").val(o.limit),1==o.limit_enable?($("#form_limit_option").prop("checked",!0),$("#form_limit_div").show()):($("#form_limit_option").prop("checked",!1),$("#form_limit_div").hide()),1==o.encryption_enable?$("#form_encryption_enable").prop("checked",!0):$("#form_encryption_enable").prop("checked",!1),$("#form_captcha_type").val(o.captcha_type),1==o.captcha?($("#form_captcha").prop("checked",!0),$("#form_captcha_type_option").show(),"i"==o.captcha_type?$("#form_prop_captcha508").show():$("#form_prop_captcha508").hide()):($("#form_captcha").prop("checked",!1),$("#form_captcha_type_option").hide()),$("#form_unique_ip_maxcount").val(o.unique_ip_maxcount),$("#form_unique_ip_period").val(o.unique_ip_period),1==o.unique_ip?($("#form_unique_ip").prop("checked",!0),$("#form_unique_ip_div").show()):($("#form_unique_ip").prop("checked",!1),$("#form_unique_ip_div").hide()),1==o.name_hide?$("#form_name_hide").prop("checked",!0):$("#form_name_hide").prop("checked",!1),1==o.schedule_enable?($("#form_schedule_enable").prop("checked",!0),$("#form_prop_scheduling_start").show(),$("#form_prop_scheduling_end").show()):($("#form_schedule_enable").prop("checked",!1),$("#form_prop_scheduling_start").hide(),$("#form_prop_scheduling_end").hide()),null!=o.schedule_start_date&&"0000-00-00"!=o.schedule_start_date?(_=o.schedule_start_date.split("-"),$("#scheduling_start_yyyy").val(_[0]),$("#scheduling_start_mm").val(parseInt(_[1],10)),$("#scheduling_start_dd").val(parseInt(_[2],10)),$("#linked_picker_scheduling_start").datepick("setDate",new Date(parseInt(_[0],10),parseInt(_[1],10)-1,parseInt(_[2],10)))):($("#scheduling_start_yyyy").val(""),$("#scheduling_start_mm").val(""),$("#scheduling_start_dd").val("")),""!=o.schedule_start_hour&&"0000-00-00"!=o.schedule_start_hour&&(_=o.schedule_start_hour.split(":"),$("#scheduling_start_hour").val(_[0]),$("#scheduling_start_minute").val(_[1]),$("#scheduling_start_ampm").val(_[2])),null!=o.schedule_end_date&&"0000-00-00"!=o.schedule_end_date?(n=o.schedule_end_date.split("-"),$("#scheduling_end_yyyy").val(n[0]),$("#scheduling_end_mm").val(parseInt(n[1],10)),$("#scheduling_end_dd").val(parseInt(n[2],10)),$("#linked_picker_scheduling_end").datepick("setDate",new Date(parseInt(n[0],10),parseInt(n[1],10)-1,parseInt(n[2],10)))):($("#scheduling_end_yyyy").val(""),$("#scheduling_end_mm").val(""),$("#scheduling_end_dd").val("")),""!=o.schedule_end_hour&&"0000-00-00"!=o.schedule_end_hour&&(n=o.schedule_end_hour.split(":"),$("#scheduling_end_hour").val(n[0]),$("#scheduling_end_minute").val(n[1]),$("#scheduling_end_ampm").val(n[2])),$("#form_custom_script_url").val(o.custom_script_url),1==o.custom_script_enable?($("#form_custom_script_enable").prop("checked",!0),$("#form_custom_script_div").show()):($("#form_custom_script_enable").prop("checked",!1),$("#form_custom_script_div").hide()),1==o.approval_enable?$("#form_approval_enable").prop("checked",!0):$("#form_approval_enable").prop("checked",!1)),adjust_main_height(),check_synch_fields()}function check_synch_fields(){var t,e=$("#form_header").data("form_properties").id,a=$("#form_builder_sortable > li").not(".dblive").not(".synched").not(".highlighted").not(".li_pagination").not("#li_lastpage");10<=a.length&&(t=new Array,a.each(function(e){t[e]=$(this).data("field_properties")}),$.ajax({type:"POST",async:!0,url:"synch_fields.php",data:{form_id:e,fp:t},cache:!1,global:!1,dataType:"json",error:function(e,t,a){},success:function(e){"ok"==e.status&&$(e.updated_element_id).addClass("synched")}}))}function select_element(e){var t=$(e);null!=active_element&&active_element!=t.attr("id")&&$("#"+active_element).removeClass("highlighted"),$("#form_header .highlighted").removeClass("highlighted"),$("#pagination_header").removeClass("highlighted"),active_element=t.attr("id"),t.addClass("highlighted"),t.removeClass("synched"),t.data("field_properties").position=t.index(),check_synch_fields(),$("#element_inactive_msg").hide(),$("#element_properties_form").show();var a=40,i=60,e=75;$.browser.msie&&(a=80,i=65,e=-10);a=t.offset().top-a;Math.abs(a-$("#sidebar").offset().top)<$(window).height()?$("#sidebar").animate({top:a},{duration:200,queue:!1}):$("#sidebar").css("top",a),$("#selected_field_image").css("visibility","visible").animate({top:a-i},{duration:200,queue:!1}),"lastpage"!=t.data("field_properties").id?$("#bottom_bar_content").animate({"margin-left":"90px"},{duration:200,queue:!1,complete:function(){$("#bottom_bar_field_action").fadeIn()}}):$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),load_properties("#"+active_element);a=a+$("#sidebar").outerHeight()-e,e=$("#header").outerHeight()+$("#header_content").outerHeight()+$("#content").outerHeight();e<a&&(e=a-e,$("#main").animate({"padding-bottom":e+"px"},{duration:200,queue:!1}))}function load_properties(e){var a=$(e).data("field_properties");$("#all_properties li").hide(),$("#element_label").val(a.title),$("#prop_element_label").show();var t,i,_,n,o,l,r,s,d,p,m,c,u,h,f,g,e="",e="matrix"==a.type?{matrix:"Matrix Choice"}:"radio"==a.type||"checkbox"==a.type||"select"==a.type?{radio:"Multiple Choice",checkbox:"Checkboxes",select:"Drop Down"}:{text:"Single Line Text",textarea:"Paragraph Text",number:"Number",simple_name:"Name",date:"Date",time:"Time",phone:"Phone",money:"Price",url:"Web Site",email:"Email",address:"Address",file:"File Upload",section:"Section Break",signature:"Signature",media:"Media"};$("#element_type > option").remove(),$.each(e,function(e,t){$("#element_type").append($("<option></option>").val(e).html(t))}),"name"==a.type||"simple_name"==a.type||"name_wmiddle"==a.type||"simple_name_wmiddle"==a.type?$("#element_type").val("simple_name"):"date"==a.type||"europe_date"==a.type?$("#element_type").val("date"):"phone"==a.type||"simple_phone"==a.type?$("#element_type").val("phone"):$("#element_type").val(a.type),1==a.is_db_live?$("#element_type").prop("disabled",!0):$("#element_type").prop("disabled",!1),$("#prop_element_type").show(),0<$("#pagination_header").length?$("#element_position").text(a.position):$("#element_position").text(a.position+1),"1"==a.is_required?$("#element_required").prop("checked",!0):$("#element_required").prop("checked",!1),"1"==a.is_unique?$("#element_unique").prop("checked",!0):$("#element_unique").prop("checked",!1),"1"==a.is_readonly?$("#element_readonly").prop("checked",!0):$("#element_readonly").prop("checked",!1),$("#element_unique_span,#element_readonly_span").show(),$("#prop_options").show(),$("#prop_breaker").show(),$("#element_public,#element_private,#element_hidden").prop("checked",!1),("1"==a.is_private?$("#element_private"):"2"==a.is_private?$("#element_hidden"):$("#element_public")).prop("checked",!0),$("#prop_access_control").show(),$("#element_instructions").val(a.guidelines),$("#prop_instructions").show(),$("#element_custom_css").val(a.css_class),$("#prop_custom_css").show(),1==a.enable_placeholder?$("#element_enable_placeholder,#element_enable_placeholder_text").prop("checked",!0):$("#element_enable_placeholder,#element_enable_placeholder_text").prop("checked",!1),"text"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_default_value_text").val(a.default_value),$("#prop_default_value_text").show(),$("#element_text_default_length").val(a.text_default_length),$("#element_text_default_prefix").val(a.text_default_prefix),$("#element_text_default_random_type").val(a.text_default_random_type),$("#element_text_default_case").val(a.text_default_case),$("#default_value_text_random_div,#default_value_text_static_div").hide(),"random"==a.text_default_type?($("#element_default_value_text_random").prop("checked",!0),$("#default_value_text_random_div").show()):($("#element_default_value_text_static").prop("checked",!0),$("#default_value_text_static_div").show()),$("#element_range_min").val(a.range_min),$("#element_range_max").val(a.range_max),$("#element_range_limit_by").val(a.range_limit_by),"password"==a.constraint?$("#prop_text_as_password").prop("checked",!0):$("#prop_text_as_password").prop("checked",!1),$("#prop_text_options").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show(),$("#element_range_number_limit_by").hide(),$("#element_range_limit_by").show(),$("#prop_range").show()):"number"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_default_value").val(a.default_value),$("#prop_default_value").show(),$("#prop_placeholder").show(),$("#element_range_min").val(a.range_min),$("#element_range_max").val(a.range_max),$("#element_range_number_limit_by").val(a.range_limit_by),$("#prop_number_advance_options").show(),1==a.number_enable_quantity?(rebuild_quantity_link_dropdown(),$("#prop_number_quantity_link").val(a.number_quantity_link),$("#prop_number_enable_quantity").prop("checked",!0),$("#prop_number_quantity_link_div").show()):($("#prop_number_enable_quantity").prop("checked",!1),$("#prop_number_quantity_link_div").hide()),$("#element_range_limit_by").hide(),$("#element_range_number_limit_by").show(),$("#prop_range").show()):"url"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_default_value").val(a.default_value),$("#prop_default_value").show(),$("#prop_placeholder").show()):"email"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_default_value").val(a.default_value),$("#prop_default_value").show(),$("#prop_placeholder").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show(),1==a.email_enable_confirmation?($("#prop_enable_email_confirmation").prop("checked",!0),$("#prop_enable_email_confirmation_div").show()):($("#prop_enable_email_confirmation").prop("checked",!1),$("#prop_enable_email_confirmation_div").hide()),t="Confirm Email Address",null!=a.email_confirm_field_label&&null!=a.email_confirm_field_label?t=a.email_confirm_field_label:a.email_confirm_field_label=t,$("#prop_confirmation_field_label").val(t),$("#prop_email_options").show()):"signature"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_unique_span").hide(),$("#element_readonly_span").hide(),$("#prop_section508_note").show()):"file"==a.type?($("#prop_file_options").show(),$("#prop_file_advance_options").show(),$("#prop_file_block_or_allow").val(a.file_block_or_allow),$("#file_type_list").val(a.file_type_list),1==a.file_as_attachment?$("#prop_file_as_attachment").prop("checked",!0):$("#prop_file_as_attachment").prop("checked",!1),1==a.file_auto_upload?$("#prop_file_auto_upload").prop("checked",!0):$("#prop_file_auto_upload").prop("checked",!1),$("#file_max_selection").val(a.file_max_selection),1==a.file_enable_multi_upload?($("#prop_file_multi_upload").prop("checked",!0),$("#form_file_max_selection").show()):($("#prop_file_multi_upload").prop("checked",!1),$("#form_file_max_selection").hide()),$("#file_size_max").val(a.file_size_max),1==a.file_enable_size_limit?($("#prop_file_limit_size").prop("checked",!0),$("#form_file_limit_size").show()):($("#prop_file_limit_size").prop("checked",!1),$("#form_file_limit_size").hide()),$("#element_unique_span").hide(),$("#element_readonly_span").hide()):"textarea"==a.type?($("#element_size").val(a.size),$("#prop_element_size").show(),$("#element_default_value_textarea").val(a.default_value),$("#prop_default_value_textarea").show(),$("#prop_placeholder").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show(),$("#element_range_min").val(a.range_min),$("#element_range_max").val(a.range_max),$("#element_range_limit_by").val(a.range_limit_by),$("#element_range_number_limit_by").hide(),$("#element_range_limit_by").show(),$("#prop_range").show()):"name"==a.type||"simple_name"==a.type||"name_wmiddle"==a.type||"simple_name_wmiddle"==a.type?($("#name_format").val(a.type),1==a.is_db_live?$("#name_format").prop("disabled",!0):$("#name_format").prop("disabled",!1),$("#prop_name_format").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show(),$("#element_unique_span").hide()):"time"==a.type?(1==a.time_showsecond?$("#prop_time_showsecond").prop("checked",!0):$("#prop_time_showsecond").prop("checked",!1),1==a.time_24hour?$("#prop_time_24hour").prop("checked",!0):$("#prop_time_24hour").prop("checked",!1),$("#element_default_time").val(a.default_value),$("#prop_default_time").show(),$("#prop_time_options").show()):"address"==a.type?($("#element_countries").val(a.default_value),$("#prop_default_country").show(),1==a.address_hideline2?$("#prop_address_hideline2").prop("checked",!0):$("#prop_address_hideline2").prop("checked",!1),1==a.address_us_only?($("#prop_address_us_only").prop("checked",!0),$("#element_countries").prop("disabled",!0)):($("#prop_address_us_only").prop("checked",!1),$("#element_countries").prop("disabled",!1)),$("#prop_address_options").show(),$("#element_unique_span").hide(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show()):"money"==a.type?($("#element_default_value").val(a.default_value),$("#prop_default_value").show(),""==a.constraint||"dollar"==a.constraint?$("#money_format").val("dollar"):$("#money_format").val(a.constraint),$("#prop_currency_format").show()):"phone"==a.type?($("#element_default_phone1").val(a.default_value.substr(0,3)),$("#element_default_phone2").val(a.default_value.substr(3,3)),$("#element_default_phone3").val(a.default_value.substr(6,4)),$("#prop_default_phone").show(),$("#phone_format").val(a.type),$("#prop_phone_format").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show()):"simple_phone"==a.type?($("#element_default_value").val(a.default_value),$("#prop_default_value").show(),$("#phone_format").val(a.type),$("#prop_phone_format").show(),$("#prop_encrypt_data").prop("disabled",!1),$("#tooltip_is_encrypted").hide(),1==a.is_encrypted?$("#prop_encrypt_data").prop("checked",!0):$("#prop_encrypt_data").prop("checked",!1),0==$("#form_header").data("form_properties").encryption_enable&&(a.is_encrypted=0,$("#prop_encrypt_data").prop("checked",!1),$("#prop_encrypt_data").prop("disabled",!0),$("#tooltip_is_encrypted").show()),$("#prop_data_encryption").show()):"date"==a.type||"europe_date"==a.type?($("#date_type").val(a.type),$("#prop_date_format").show(),$("#element_default_date").val(a.default_value),$("#prop_default_date").show(),$("#prop_date_options").show(),t=!1,null!=a.date_range_min&&"0000-00-00"!=a.date_range_min&&(-1<a.date_range_min.indexOf("-00-00")&&(t=!0),-1<a.date_range_min.indexOf("-00-01")&&(t=!0)),null!=a.date_range_max&&"0000-00-00"!=a.date_range_max&&(-1<a.date_range_max.indexOf("-00-00")&&(t=!0),-1<a.date_range_max.indexOf("-00-01")&&(t=!0)),1==a.date_enable_range?($("#prop_date_range").prop("checked",!0),$("#prop_date_range_details").show(),$("#prop_date_range_fixed,#prop_date_range_relative").hide(),1==t?($("#prop_date_range_format_switcher").val("relative"),$("#prop_date_range_relative").show()):($("#prop_date_range_format_switcher").val("fixed"),$("#prop_date_range_fixed").show())):($("#prop_date_range").prop("checked",!1),$("#prop_date_range_details").hide()),1==t?(null!=a.date_range_min&&"0000-00-00"!=a.date_range_min?"01"==(i=a.date_range_min.split("-"))[2]?$("#date_range_min_relative").val(-parseInt(i[0])):$("#date_range_min_relative").val(parseInt(i[0])):$("#date_range_min_relative").val(0),null!=a.date_range_max&&"0000-00-00"!=a.date_range_max?"01"==(_=a.date_range_max.split("-"))[2]?$("#date_range_max_relative").val(-parseInt(_[0])):$("#date_range_max_relative").val(parseInt(_[0])):$("#date_range_max_relative").val(0)):(null!=a.date_range_min&&"0000-00-00"!=a.date_range_min?(i=a.date_range_min.split("-"),$("#date_range_min_yyyy").val(i[0]),$("#date_range_min_mm").val(parseInt(i[1],10)),$("#date_range_min_dd").val(parseInt(i[2],10)),$("#linked_picker_range_min").datepick("setDate",new Date(parseInt(i[0],10),parseInt(i[1],10)-1,parseInt(i[2],10)))):($("#date_range_min_yyyy").val(""),$("#date_range_min_mm").val(""),$("#date_range_min_dd").val("")),null!=a.date_range_max&&"0000-00-00"!=a.date_range_max?(_=a.date_range_max.split("-"),$("#date_range_max_yyyy").val(_[0]),$("#date_range_max_mm").val(parseInt(_[1],10)),$("#date_range_max_dd").val(parseInt(_[2],10)),$("#linked_picker_range_max").datepick("setDate",new Date(parseInt(_[0],10),parseInt(_[1],10)-1,parseInt(_[2],10)))):($("#date_range_max_yyyy").val(""),$("#date_range_max_mm").val(""),$("#date_range_max_dd").val(""))),1==a.date_enable_selection_limit?($("#prop_date_selection_limit").prop("checked",!0),$("#form_date_selection_limit").show()):($("#prop_date_selection_limit").prop("checked",!1),$("#form_date_selection_limit").hide()),$("#date_selection_max").val(a.date_selection_max),1==a.date_disable_past_future?($("#prop_date_past_future_selection").prop("checked",!0),$("#prop_date_past_future").val(a.date_past_future).prop("disabled",!1)):($("#prop_date_past_future_selection").prop("checked",!1),$("#prop_date_past_future").val(a.date_past_future).prop("disabled",!0)),1==a.date_disable_dayofweek?($("#prop_date_disable_dayofweek").prop("checked",!0),$("#div_disable_dayofweek_list").show()):($("#prop_date_disable_dayofweek").prop("checked",!1),$("#div_disable_dayofweek_list").hide()),$("#div_disable_dayofweek_list input.dayofweek").prop("checked",!1),null!=a.date_disabled_dayofweek_list&&""!=a.date_disabled_dayofweek_list?(n=a.date_disabled_dayofweek_list.split(","),$.each(n,function(e,t){$("#dayofweek_"+t).prop("checked",!0)})):($("#div_disable_dayofweek_list").hide(),$("#prop_date_disable_dayofweek").prop("checked",!1)),1==a.date_disable_specific?($("#prop_date_disable_specific").prop("checked",!0),$("#form_date_disable_specific").show()):($("#prop_date_disable_specific").prop("checked",!1),$("#form_date_disable_specific").hide()),null!=a.date_disabled_list&&""!=a.date_disabled_list&&(n=a.date_disabled_list.split(", "),$("#date_disabled_list").datepick("setDate",n)),$("#date_disabled_list").val(a.date_disabled_list)):"section"==a.type?($("#prop_options").hide(),1==a.section_display_in_email?$("#prop_section_email_display").prop("checked",!0):$("#prop_section_email_display").prop("checked",!1),$("#prop_section_size").val(a.size),1==a.section_enable_scroll?($("#prop_section_enable_scroll").prop("checked",!0),$("#div_section_size").show()):($("#prop_section_enable_scroll").prop("checked",!1),$("#div_section_size").hide()),$("#prop_section_options").show()):"radio"==a.type||"checkbox"==a.type||"select"==a.type?(l=o=m=p=s="",r=d=0,h=a.options,c=new Array,$.each(h,function(e,t){c[t.position]=e}),"radio"==a.type||"select"==a.type?l="radio":"checkbox"==a.type&&(l="checkbox"),"select"==a.type&&($("#element_size").val(a.size),$("#prop_element_size").show()),$.each(c,function(e,t){0<e&&("1"==a.options[t].is_hidden?r++:(d=t,s=a.options[t].option,o="1"==a.options[t].is_default?' checked="checked" ':"",p='<li><input type="'+l+'" '+o+' title="Select this choice as the default." class="choices_default" name="choices_default" id="choicedef_'+d+'" /><input type="text" value="'+s.replace(/\"/g,"&quot;")+'" autocomplete="off" class="text" id="choice_'+d+'" /> <a href="#" class="add_choice" title="Add Choice" id="choiceadd_'+d+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Hide Choice" id="choicedel_'+d+'"><span class="icon-cancel-circle"></span></a></li>',m+=p))}),$("#element_choices li").remove(),$("#element_choices").append(m),$("#prop_choices").show(),$("#toggle_hidden_choices").hide(),$("#hidden_choices_counter").text("0"),0<r&&($("#hidden_choices_counter").text(r),$("#toggle_hidden_choices").show()),"radio"!=a.type&&"checkbox"!=a.type||($("#element_choice_columns").val(a.choice_columns),$("#prop_choice_columns").show()),"radio"!=a.type&&"checkbox"!=a.type||($("#prop_other_choices_label").val(a.choice_other_label),1==a.choice_has_other?($("#prop_choices_other_checkbox").prop("checked",!0),$("#prop_other_choices_label").prop("disabled",!1)):($("#prop_choices_other_checkbox").prop("checked",!1),$("#prop_other_choices_label").prop("disabled",!0)),"radio"==a.type?("random"==a.constraint?$("#prop_choices_randomize").prop("checked",!0):$("#prop_choices_randomize").prop("checked",!1),$("#prop_choices_randomize_span").show()):$("#prop_choices_randomize_span").hide(),$("#prop_choices_other").show()),"radio"!=a.type&&"select"!=a.type||($("#choice_max_entry").val(a.choice_max_entry),0<a.choice_max_entry?($("#prop_choice_max_entry_enable").prop("checked",!0),$("#form_choice_max_entry").show()):($("#prop_choice_max_entry_enable").prop("checked",!1),$("#form_choice_max_entry").hide()),$("#prop_choice_max_entry").show()),"checkbox"==a.type&&($("#prop_choice_limit_rule").val(a.choice_limit_rule),$("#prop_choice_limit_qty").val(a.choice_limit_qty),$("#prop_choice_limit_range_min").val(a.choice_limit_range_min),$("#prop_choice_limit_range_max").val(a.choice_limit_range_max),$("#prop_choice_limit_range_span,#prop_choice_limit_qty_span").hide(),("between"==a.choice_limit_rule?$("#prop_choice_limit_range_span"):$("#prop_choice_limit_qty_span")).show(),"1"==a.is_required&&$("#prop_choice_limit").show()),$("#element_unique_span").hide(),$("#element_readonly_span").hide()):"matrix"==a.type?(d=0,m=p=s="",h=a.options,c=new Array,$.each(h,function(e,t){c[t.position]=e}),u="",$.each(c,function(e,t){0<e&&(choice_element_id=t,s=a.options[t].row_title,1<e&&(u='<a href="#" class="del_choice" title="Remove Permanently" id="matrixrowdel_'+choice_element_id+'"><span class="icon-remove"></span></a>'),p='<li><input type="text" value="'+s.replace(/\"/g,"&quot;")+'" autocomplete="off" class="text" id="matrixrow_'+choice_element_id+'" /> <a href="#" class="add_choice" title="Add" id="matrixrowadd_'+choice_element_id+'"><span class="icon-plus-circle"></span></a>'+u+"</li>",m+=p)}),$("#element_matrix_row li").remove(),$("#element_matrix_row").append(m),$("#prop_matrix_row").show(),m="",h=parseInt($("#"+active_element).data("field_properties").id),f=a.options[h].column_data,g=new Array,$.each(f,function(e,t){g[t.position]=e}),$.each(g,function(e,t){0<e&&(s=f[d=t].column_title,p='<li><input type="text" value="'+s.replace(/\"/g,"&quot;")+'" autocomplete="off" class="text" id="matrixcol_'+d+'" /> <a href="#" class="add_choice" title="Add" id="matrixcoladd_'+d+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Remove Permanently" id="matrixcoldel_'+d+'"><span class="icon-remove"></span></a></li>',m+=p)}),$("#element_matrix_column li").remove(),$("#element_matrix_column").append(m),$("#prop_matrix_column").show(),1==a.matrix_allow_multiselect?$("#prop_matrix_allow_multiselect").prop("checked",!0):$("#prop_matrix_allow_multiselect").prop("checked",!1),$("#"+active_element).hasClass("dblive")?$("#prop_matrix_allow_multiselect").prop("disabled",!0):$("#prop_matrix_allow_multiselect").prop("disabled",!1),$("#prop_matrix_options").show(),$("#prop_instructions").hide(),$("#element_unique_span").hide(),$("#element_label").val(a.guidelines),$("#element_readonly_span").hide()):"page_break"==a.type?($("#all_properties li").hide(),$("#prop_page_break_button").show(),1==a.submit_use_image?($("#prop_submit_use_image").prop("checked",!0),$("#prop_submit_use_text").prop("checked",!1),""==a.submit_primary_img||null==a.submit_primary_img?$("#submit_primary_img").val("http://"):$("#submit_primary_img").val(a.submit_primary_img),""==a.submit_secondary_img||null==a.submit_secondary_img?$("#submit_secondary_img").val("http://"):$("#submit_secondary_img").val(a.submit_secondary_img),$("#"+active_element).hasClass("firstpage")?($("#lbl_submit_secondary_img").hide(),$("#submit_secondary_img").hide()):($("#lbl_submit_secondary_img").show(),$("#submit_secondary_img").show()),$("#div_submit_use_image").show(),$("#div_submit_use_text").hide()):($("#prop_submit_use_image").prop("checked",!1),$("#prop_submit_use_text").prop("checked",!0),$("#submit_primary_text").val(a.submit_primary_text),$("#submit_secondary_text").val(a.submit_secondary_text),$("#"+active_element).hasClass("firstpage")?($("#lbl_submit_secondary_text").hide(),$("#submit_secondary_text").hide()):($("#lbl_submit_secondary_text").show(),$("#submit_secondary_text").show()),$("#div_submit_use_image").hide(),$("#div_submit_use_text").show())):"media"==a.type&&($("#prop_options").hide(),$("#prop_media_type").show(),$("#element_media_"+a.media_type).prop("checked",!0),$("#div_image_src,#div_image_upload_file").hide(),null==a.media_image_src||0==a.media_image_src.length?($("#element_image_upload_file").prop("checked",!0),$("#div_image_upload_file").show()):($("#element_image_set_url").prop("checked",!0),$("#div_image_src").show()),$("#element_image_src").val(a.media_image_src),$("#element_image_width").val(a.media_image_width),$("#element_image_height").val(a.media_image_height),$("#element_image_width").data("original-image-width",a.media_image_width),$("#element_image_height").data("original-image-height",a.media_image_height),$("#element_media_image_alt").val(a.media_image_alt),$("#element_media_image_href").val(a.media_image_href),"l"==a.media_image_alignment?$("#element_image_alignment_left").prop("checked",!0):"c"==a.media_image_alignment?$("#element_image_alignment_center").prop("checked",!0):"r"==a.media_image_alignment&&$("#element_image_alignment_right").prop("checked",!0),"1"==a.media_display_in_email?$("#element_media_display_in_email").prop("checked",!0):$("#element_media_display_in_email").prop("checked",!1),$("#element_media_video_src").val(a.media_video_src),"small"==a.media_video_size?$("#element_media_video_size_small").prop("checked",!0):"medium"==a.media_video_size?$("#element_media_video_size_medium").prop("checked",!0):"large"==a.media_video_size&&$("#element_media_video_size_large").prop("checked",!0),"1"==a.media_video_muted?$("#element_media_video_muted").prop("checked",!0):$("#element_media_video_muted").prop("checked",!1),$("#element_media_video_caption_file").val(a.media_video_caption_file),null==a.media_video_caption_file||0==a.media_video_caption_file.length?($("#element_media_video_enable_caption").prop("checked",!1),$("#div_video_caption_file").hide()):($("#element_media_video_enable_caption").prop("checked",!0),$("#div_video_caption_file").show()),$("#div_pdf_src,#div_pdf_upload_file").hide(),null==a.media_pdf_src||0==a.media_pdf_src.length?($("#element_pdf_upload_file").prop("checked",!0),$("#div_pdf_upload_file").show()):($("#element_pdf_set_url").prop("checked",!0),$("#div_pdf_src").show()),$("#element_pdf_src").val(a.media_pdf_src),"small"==a.size?$("#element_pdf_size_small").prop("checked",!0):"medium"==a.size?$("#element_pdf_size_medium").prop("checked",!0):"large"==a.size&&$("#element_pdf_size_large").prop("checked",!0),"image"==a.media_type?$("#prop_image_options").show():"video"==a.media_type?$("#prop_video_options").show():"pdf"==a.media_type&&$("#prop_pdf_options").show()),$("#element_label").focus().select()}function set_properties(e,a){var t,i,_,n,o,l,r,s,d,p,m,c,u,h,f,g,b,v,y,x,k,w,C,q,z=$("#"+active_element),I=z.data("field_properties"),O=' <span class="required">*</span>',M=active_element.split("_")[1];"element_label"==e?"section"==I.type||"media"==I.type?($("#"+active_element+" > h3").html(a.replace(/\n/g,"<br />")),I.title=a):"matrix"==I.type?("0"===I.is_required&&(O=""),$("#"+active_element+" caption").html(a.replace(/\n/g,"<br />")+O),I.guidelines=a):("name"==I.type||"name_wmiddle"==I.type||"simple_name"==I.type||"simple_name_wmiddle"==I.type||"time"==I.type||"address"==I.type||"date"==I.type||"europe_date"==I.type||"phone"==I.type?("0"===I.is_required&&(O=""),$("#"+active_element+" > fieldset > span.description").html(a.replace(/\n/g,"<br />")+O)):"email"==I.type?("0"===I.is_required&&(O=""),$("#"+active_element+" > label:not(.confirm_email_label)").html(a.replace(/\n/g,"<br />")+O)):("0"===I.is_required&&(O=""),$("#"+active_element+" > label").html(a.replace(/\n/g,"<br />")+O),$("#"+active_element+" > span.description").html(a.replace(/\n/g,"<br />")+O)),I.title=a):"element_encrypted"==e?I.is_encrypted=a:"element_media_type"==e?($("#"+active_element+" .media_icon > span").removeClass("icon-image2 icon-play2 icon-file-pdf"),$("#prop_image_options,#prop_video_options,#prop_pdf_options").hide(),i="",$("#"+active_element).removeClass("media_image media_video media_pdf"),"image"==a?(i="icon-image2",$("#"+active_element).addClass("media_image"),$("#prop_image_options").show(),$("#"+active_element+" .media_pdf_container").remove(),0!=$("#"+active_element+" .video-js").length&&void 0!==(t=videojs("video_"+I.id))&&(t.dispose(),$("#"+active_element+" .media_video_container").remove()),$("#element_image_src").keyup()):"video"==a?(i="icon-play2",$("#"+active_element).addClass("media_video"),$("#prop_video_options").show(),$("#"+active_element+" .media_image_container").remove(),$("#"+active_element+" .media_pdf_container").remove(),$("#element_media_video_src").keyup(),I.media_display_in_email=0):"pdf"==a&&(i="icon-file-pdf",$("#"+active_element).addClass("media_pdf"),$("#prop_pdf_options").show(),$("#"+active_element+" .media_image_container").remove(),0!=$("#"+active_element+" .video-js").length&&void 0!==(t=videojs("video_"+I.id))&&(t.dispose(),$("#"+active_element+" .media_video_container").remove()),$("#element_pdf_src").keyup()),$("#"+active_element+" .media_icon > span").addClass(i),I.media_type=a):"element_required"==e?("1"==a?("matrix"==I.type?$("#"+active_element+" caption").append(O):($("#"+active_element+" > label").append(O),$("#"+active_element+" > span.description").append(O),$("#"+active_element+" fieldset > span.description").append(O)),"checkbox"==I.type&&$("#prop_choice_limit").fadeIn()):("checkbox"==I.type&&$("#prop_choice_limit").hide(),$("#"+active_element+" span.required").remove()),I.is_required=a):"element_unique"==e?I.is_unique=a:"element_readonly"==e?I.is_readonly=a:"element_visibility"==e?("1"==a?$("#"+active_element).addClass("private"):$("#"+active_element).removeClass("private"),I.is_private=a):"element_text_default_type"==e?($("#default_value_text_static_div,#default_value_text_random_div").hide(),"static"==a?($("#default_value_text_static_div").show(),$("#"+active_element+" :input").val(I.default_value)):($("#default_value_text_random_div").show(),rebuild_default_text_random_preview()),I.text_default_type=a):"element_guidelines"==e?("section"==I.type?$("#"+active_element+" > p").html(a.replace(/\n/g,"<br />")):"media"==I.type?$("#"+active_element+" > p.media_guidelines").html(a.replace(/\n/g,"<br />")):"signature"==I.type?$("#"+active_element+" span.signature_guidelines").html(a.replace(/\n/g,"<br />")):$("#"+active_element+" > p.guidelines").length?($("#"+active_element+" > p.guidelines").html(a.replace(/\n/g,"<br />")),$("#"+active_element+" > p.guidelines").text().length<1&&($("#"+active_element+" > p.guidelines").remove(),0==$("#form_builder_sortable p.guidelines").length&&($("#form_builder_sortable > li").size()<=50?$("#form_builder_sortable > li").not(".li_pagination").animate({width:"97%"},{duration:250,queue:!0,complete:function(){$("#main_body").addClass("no_guidelines")}}):$("#form_builder_sortable > li").not(".li_pagination").css("width","97%"),$("#main_body").addClass("no_guidelines")))):""!=a&&($("#main_body").hasClass("no_guidelines")&&(i="61%","top_label"!=$("#form_header").data("form_properties").label_alignment&&(i="76%"),$("#form_builder_sortable > li").size()<=50?$("#form_builder_sortable > li").not(".li_pagination").animate({width:i},{duration:250,queue:!0,complete:function(){$("#main_body").removeClass("no_guidelines")}}):$("#form_builder_sortable > li").not(".li_pagination").css("width",i),$("#main_body").removeClass("no_guidelines")),$("#"+active_element).append('<p class="guidelines">'+a.replace(/\n/g,"<br />")+"</p>")),I.guidelines=a):"element_custom_css"==e?I.css_class=a:"element_email_confirm_field_label"==e?(I.email_confirm_field_label=a,"0"===I.is_required&&(O=""),$("#"+active_element+" > label.confirm_email_label").html(a.replace(/\n/g,"<br />")+O)):"element_section_display_in_email"==e?I.section_display_in_email=a:"element_enable_placeholder"==e?I.enable_placeholder=a:"element_email_enable_confirmation"==e?1==(I.email_enable_confirmation=a)?($("#prop_enable_email_confirmation_div").show(),"0"===I.is_required&&(O=""),_='<label class="description confirm_email_label" for="element_'+active_element+'_confirm">'+I.email_confirm_field_label+" "+O+'</label><div><input id="element_'+active_element+'_confirm" name="element_'+active_element+'_confirm" class="element text '+I.size+' confirm_email_input" type="text" maxlength="255" value="" /></div>',$("#"+active_element).append(_)):($("#prop_enable_email_confirmation_div").hide(),$("#"+active_element+" > label.confirm_email_label").remove(),$("#"+active_element+" input.confirm_email_input").parent().remove()):"element_date_enable_range"==e?(1==a?($("#prop_date_range_details").slideDown(),$("#prop_date_past_future").prop("disabled",!0),$("#prop_date_past_future_selection").prop("checked",!1),I.date_disable_past_future=0):$("#prop_date_range_details").hide(),I.date_enable_range=a):"element_date_range_format"==e?($("#prop_date_range_fixed,#prop_date_range_relative").hide(),$("#date_range_min_yyyy,#date_range_min_mm,#date_range_min_dd").val(""),$("#date_range_max_yyyy,#date_range_max_mm,#date_range_max_dd").val(""),$("#date_range_min_relative,#date_range_max_relative").val(0),"relative"==a?($("#prop_date_range_relative").fadeIn(),_=("0000"+parseInt($("#date_range_min_relative").val())).slice(-4),n=("0000"+parseInt($("#date_range_max_relative").val())).slice(-4),I.date_range_min=_+"-00-00",I.date_range_max=n+"-00-00"):"fixed"==a&&($("#prop_date_range_fixed").fadeIn(),I.date_range_min=$("#date_range_min_yyyy").val()+"-"+$("#date_range_min_mm").val()+"-"+$("#date_range_min_dd").val(),I.date_range_max=$("#date_range_max_yyyy").val()+"-"+$("#date_range_max_mm").val()+"-"+$("#date_range_max_dd").val())):"element_date_range_min"==e?I.date_range_min=a:"element_date_range_max"==e?I.date_range_max=a:"element_date_enable_selection_limit"==e?(1==a?$("#form_date_selection_limit").slideDown():$("#form_date_selection_limit").hide(),I.date_enable_selection_limit=a):"element_section_enable_scroll"==e?(1==a?($("#"+active_element).removeClass("section_scroll_small section_scroll_medium section_scroll_large").addClass("section_scroll_"+I.size),$("#div_section_size").slideDown()):($("#"+active_element).removeClass("section_scroll_small section_scroll_medium section_scroll_large"),$("#div_section_size").fadeOut("fast")),I.section_enable_scroll=a):"element_date_selection_max"==e?I.date_selection_max=parseInt(a):"element_date_disable_specific"==e?(1==a?$("#form_date_disable_specific").slideDown():$("#form_date_disable_specific").hide(),I.date_disable_specific=a):"element_date_disabled_list"==e?I.date_disabled_list=a:"element_date_disable_past_future"==e?(1==a?($("#prop_date_past_future").prop("disabled",!1),$("#prop_date_range_details").hide(),$("#prop_date_range").prop("checked",!1),I.date_enable_range=0):$("#prop_date_past_future").prop("disabled",!0),I.date_disable_past_future=a):"element_date_disable_dayofweek"==e?1==(I.date_disable_dayofweek=a)?$("#div_disable_dayofweek_list").slideDown():$("#div_disable_dayofweek_list").hide():"element_date_disabled_dayofweek_list"==e?I.date_disabled_dayofweek_list=a:"date_past_future"==e?I.date_past_future=a:"element_file_type_list"==e?I.file_type_list=a:"element_file_as_attachment"==e?I.file_as_attachment=a:"element_file_auto_upload"==e?I.file_auto_upload=a:"element_file_enable_multi_upload"==e?(1==a?$("#form_file_max_selection").slideDown():$("#form_file_max_selection").fadeOut("slow"),I.file_enable_multi_upload=a):"element_file_max_selection"==e?I.file_max_selection=parseInt(a):"element_file_enable_size_limit"==e?(1==a?$("#form_file_limit_size").slideDown():$("#form_file_limit_size").fadeOut("slow"),I.file_enable_size_limit=a):"element_file_size_max"==e?I.file_size_max=parseInt(a):"element_number_enable_quantity"==e?(1==a?(rebuild_quantity_link_dropdown(),$("#prop_number_quantity_link_div").slideDown()):$("#prop_number_quantity_link_div").fadeOut("slow"),I.number_enable_quantity=a):"element_number_quantity_link"==e?I.number_quantity_link=a:"element_choice_columns"==e?(n="",1==a?n="":2==a?n="two_columns":3==a?n="three_columns":9==a&&(n="inline_columns"),$("#"+active_element).removeClass("two_columns three_columns inline_columns").addClass(n),I.choice_columns=a):"element_range_min"==e?(o=parseInt(a),isNaN(o)?I.range_min=0:I.range_min=o,$("#"+active_element+" div > label").remove(),l="","c"==I.range_limit_by?l="characters":"w"==I.range_limit_by?l="words":"d"==I.range_limit_by&&(l="digits"),"c"==I.range_limit_by||"w"==I.range_limit_by||"d"==I.range_limit_by?0<I.range_min&&0<I.range_max&&I.range_min==I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Maximum of <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var> allowed.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Minimum of <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var> required.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):"v"==I.range_limit_by&&(0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number less than or equal to <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Must be a number greater than or equal to <var id="range_min_'+M+'">'+I.range_min+"</var>.</label>"))):"element_range_max"==e?(o=parseInt(a),isNaN(o)?I.range_max=0:I.range_max=o,$("#"+active_element+" div > label").remove(),l="","c"==I.range_limit_by?l="characters":"w"==I.range_limit_by?l="words":"d"==I.range_limit_by&&(l="digits"),"c"==I.range_limit_by||"w"==I.range_limit_by||"d"==I.range_limit_by?0<I.range_min&&0<I.range_max&&I.range_min==I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Maximum of <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var> allowed.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Minimum of <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var> required.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):"v"==I.range_limit_by&&(0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number less than or equal to <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Must be a number greater than or equal to <var id="range_min_'+M+'">'+I.range_min+"</var>.</label>"))):"element_range_limit_by"==e?("c"==a?$("#"+active_element+" var.range_limit_by").text("characters"):"w"==a&&$("#"+active_element+" var.range_limit_by").text("words"),"number"==I.type&&($("#"+active_element+" div > label").remove(),"d"==a?(l="digits",0<I.range_min&&0<I.range_max&&I.range_min==I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var>.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Maximum of <var id="range_max_'+M+'">'+I.range_max+'</var> <var class="range_limit_by">'+l+'</var> allowed.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Minimum of <var id="range_min_'+M+'">'+I.range_min+'</var> <var class="range_limit_by">'+l+'</var> required.&nbsp;&nbsp; <em class="currently_entered">Currently Entered: <var id="currently_entered_'+M+'">0</var> <var class="range_limit_by">'+l+"</var>.</em></label>")):"v"==a&&(0<I.range_min&&0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number between <var id="range_min_'+M+'">'+I.range_min+'</var> and <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_max?$("#element_"+M).after('<label for="element_'+M+'">Must be a number less than or equal to <var id="range_max_'+M+'">'+I.range_max+"</var>.</label>"):0<I.range_min&&$("#element_"+M).after('<label for="element_'+M+'">Must be a number greater than or equal to <var id="range_min_'+M+'">'+I.range_min+"</var>.</label>"))),I.range_limit_by=a):"element_size"==e?(I.size=a,"section"==z.data("field_properties").type?$("#"+active_element).removeClass("section_scroll_small section_scroll_medium section_scroll_large").addClass("section_scroll_"+a):("signature"==z.data("field_properties").type?$("#"+active_element+" .signature_pad"):$("#"+active_element+" :input")).removeClass("small medium large").addClass(a)):"element_type_change"==e?(r=I.position,s=z.html(),d=$("#form_header").data("form_properties").id,p=$("#"+active_element).data("field_properties"),0==z.data("field_properties").is_db_live&&(z.html('<img src="images/loader_small.gif" style="vertical-align: middle"/> changing field type ...').addClass("delete_processing"),$.ajax({type:"POST",async:!0,url:"delete_draft_field.php",data:{form_id:d,element_id:z.data("field_properties").id,element_type:z.data("field_properties").type},cache:!1,global:!0,dataType:"json",error:function(e,t,a){z.html(s).removeClass("delete_processing")},success:function(e){"ok"==e.status?(p.type=a,$.ajax({type:"POST",async:!0,url:"add_field.php",data:{element_type:a,form_id:d,holder_id:"li_"+I.id,position:r,action:"duplicate",field_properties:p},cache:!1,global:!0,dataType:"json",error:function(e,t,a){z.html(s).removeClass("delete_processing"),$("#dialog-message").dialog("open")},success:function(e){var t;"ok"==e.status?((t=$(e.markup)).data("field_properties",z.data("field_properties")),t.data("field_properties").id=e.element_id,t.data("field_properties").type=a,$("#"+e.holder_id).replaceWith(t),$("#li_"+e.element_id).hide().fadeIn(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions"),select_element("#li_"+e.element_id)):($("#dialog-message").dialog("open"),$("#form_builder_sortable .click_processing").remove())}})):(z.html(s).removeClass("delete_processing"),$("#dialog-message").dialog("open"))}}))):"element_default_value"==e?(I.default_value=a,"address"==I.type?$("#element_"+I.id+"_6").val(a):"date"==I.type||"europe_date"==I.type||"time"==I.type||("phone"==I.type?($("#element_"+I.id+"_1").val($("#element_default_phone1").val()),$("#element_"+I.id+"_2").val($("#element_default_phone2").val()),$("#element_"+I.id+"_3").val($("#element_default_phone3").val())):"money"==I.type?"yen"==I.constraint?$("#"+active_element+" :input").val(a):(m=a.split("."),$("#"+active_element+" :input").eq(0).val(m[0]),$("#"+active_element+" :input").eq(1).val(m[1])):("email"==I.type?$("#"+active_element+" :input:not(.confirm_email_input)"):$("#"+active_element+" :input")).val(a))):"element_choice_other_label"==e?(I.choice_other_label=a,$("#"+active_element+" label.other").html(a)):"element_choice_has_other"==e?1==(I.choice_has_other=a)?(m="",m+='<input id="element_'+I.id+'_0" name="element_'+I.id+'" class="element radio" type="'+I.type+'" value="0" />',m+='<label class="choice other" for="element_'+I.id+'_0">'+I.choice_other_label+"</label>",m="<span>"+(m+='<input type="text" value="" class="element text other" name="element_'+I.id+'_other" id="element_'+I.id+'_other" />')+"</span>",$("#"+active_element+"  div").append(m),$("#"+active_element+"  div span").last().hide().slideDown(),$("#prop_other_choices_label").prop("disabled",!1).select().focus()):($("#"+active_element+" div span").last().slideUp("slow",function(){$(this).remove()}),$("#prop_other_choices_label").prop("disabled",!0)):"element_choice_limit_rule"==e?(I.choice_limit_rule=a,$("#prop_choice_limit_range_span,#prop_choice_limit_qty_span").hide(),("between"==a?$("#prop_choice_limit_range_span"):$("#prop_choice_limit_qty_span")).show()):"element_choice_limit_qty"==e?I.choice_limit_qty=a:"element_choice_limit_range_min"==e?I.choice_limit_range_min=a:"element_choice_limit_range_max"==e?I.choice_limit_range_max=a:"element_choice_max_entry"==e?I.choice_max_entry=a:"element_text_default_length"==e?(I.text_default_length=a,rebuild_default_text_random_preview()):"element_text_default_prefix"==e?(I.text_default_prefix=a,rebuild_default_text_random_preview()):"element_text_default_random_type"==e?(I.text_default_random_type=a,rebuild_default_text_random_preview()):"element_text_default_case"==e?(I.text_default_case=a,rebuild_default_text_random_preview()):"constraint"==e?("money"==I.type?(h=u=c="","dollar"==a||""==a?(c="&#36;",u="Dollars",h="Cents"):"euro"==a?(c="&#8364;",u="Euros",h="Cents"):"pound"==a?(c="&#163;",u="Pounds",h="Pence"):"baht"==a?(c="&#3647;",u="Baht",h="Satang"):"rupees"==a?(c="Rs",u="Rupees",h="Paise"):"rand"==a?(c="R",u="Rand",h="Cents"):"reais"==a?(c="R&#36;",u="Reais",h="Centavos"):"forint"==a?(c="&#70;&#116;",u="Forint",h="Filler"):"franc"==a?(c="CHF",u="Francs",h="Rappen"):"koruna"==a?(c="&#75;&#269;",u="Koruna",h="Haléřů"):"krona"==a?(c="kr",u="Kroner",h="Øre"):"pesos"==a?(c="&#36;",u="Pesos",h="Cents"):"ringgit"==a?(c="RM",u="Ringgit",h="Sen"):"zloty"==a?(c="&#122;&#322;",u="Złoty",h="Grosz"):"riyals"==a?(c="&#65020;",u="Riyals",h="Halalah"):"yen"==a&&(c="&#165;",u="Yen"),$("#"+active_element+" > span.symbol").html(c),"yen"==a&&"yen"!=I.constraint?($("#"+active_element+" > span").last().remove(),$("#"+active_element+" > span").last().contents().filter(function(){return 3==this.nodeType}).remove(),$("#element_"+I.id+"_1").attr("size",15),$("#"+active_element+" > span label").first().text(u)):"yen"!=a&&"yen"==I.constraint?($("#element_"+I.id+"_1").attr("size",10),$("#"+active_element+" > span").first().next().children().first().after(" . "),$("#"+active_element).append('<span><input type="text" size="2" class="text" readonly="readonly"><label>'+h+"</label></span>"),$("#"+active_element+" > span label").first().text(u)):"yen"!=a&&"yen"!=I.constraint&&$("#"+active_element+" > span label").first().text(u).end().last().text(h)):"text"==I.type&&(f='<input type="'+("password"==a?"password":"text")+'" title="" value="'+$("#element_"+I.id).val()+'" class="element text '+I.size+'" name="element_'+I.id+'" id="element_'+I.id+'">',$("#element_"+I.id).remove(),$("#"+active_element+" > div").append(f)),I.constraint=a):"element_type"==e?(1==I.is_db_live||"simple_name"!=a&&"name"!=a&&"simple_name_wmiddle"!=a&&"name_wmiddle"!=a||($("#"+active_element+" > fieldset > span:not(.description)").remove(),g=f=h=u=c="","simple_name"==a?(u='<span><input value="" size="8" maxlength="255" class="element text" name="element_'+I.id+'_1" id="element_'+I.id+'_1"><label>First</label></span>',f='<span><input value="" size="14" maxlength="255" class="element text" name="element_'+I.id+'_2" id="element_'+I.id+'_2"><label>Last</label></span>',$("#"+active_element+" > fieldset > span.description").after(u+f)):"name"==a?(c='<span><input value="" size="2" maxlength="255" class="element text" name="element_'+I.id+'_1" id="element_'+I.id+'_1"><label>Title</label></span>',u='<span><input value="" size="8" maxlength="255" class="element text" name="element_'+I.id+'_2" id="element_'+I.id+'_2"><label>First</label></span>',f='<span><input value="" size="14" maxlength="255" class="element text" name="element_'+I.id+'_3" id="element_'+I.id+'_3"><label>Last</label></span>',g='<span><input value="" size="3" maxlength="255" class="element text" name="element_'+I.id+'_4" id="element_'+I.id+'_4"><label>Suffix</label></span>',$("#"+active_element+" > fieldset > span.description").after(c+u+f+g)):"simple_name_wmiddle"==a?(u='<span><input value="" size="8" maxlength="255" class="element text" name="element_'+I.id+'_1" id="element_'+I.id+'_1"><label>First</label></span>',h='<span><input value="" size="8" maxlength="255" class="element text" name="element_'+I.id+'_2" id="element_'+I.id+'_2"><label>Middle</label></span>',f='<span><input value="" size="14" maxlength="255" class="element text" name="element_'+I.id+'_3" id="element_'+I.id+'_3"><label>Last</label></span>',$("#"+active_element+" > fieldset > span.description").after(u+h+f)):"name_wmiddle"==a&&(c='<span class="namewm_ext"><input value="" maxlength="255" class="element text large" name="element_'+I.id+'_1" id="element_'+I.id+'_1"><label>Title</label></span>',u='<span class="namewm_first"><input value="" maxlength="255" class="element text large" name="element_'+I.id+'_2" id="element_'+I.id+'_2"><label>First</label></span>',h='<span class="namewm_middle"><input value="" maxlength="255" class="element text large" name="element_'+I.id+'_3" id="element_'+I.id+'_3"><label>Middle</label></span>',f='<span class="namewm_last"><input value="" maxlength="255" class="element text large" name="element_'+I.id+'_4" id="element_'+I.id+'_4"><label>Last</label></span>',g='<span class="namewm_ext"><input value="" maxlength="255" class="element text large" name="element_'+I.id+'_5" id="element_'+I.id+'_5"><label>Suffix</label></span>',$("#"+active_element+" > fieldset > span.description").after(c+u+h+f+g))),"date"==a?($("#"+active_element+" > fieldset > span > label").eq(0).text("MM").end().eq(1).text("DD"),$("#element_"+I.id+"_1").val(""),$("#element_"+I.id+"_2").val(""),$("#element_"+I.id+"_3").val(""),$("#element_default_date").val(""),I.default_value=""):"europe_date"==a&&($("#"+active_element+" > fieldset > span > label").eq(0).text("DD").end().eq(1).text("MM"),$("#element_"+I.id+"_1").val(""),$("#element_"+I.id+"_2").val(""),$("#element_"+I.id+"_3").val(""),$("#element_default_date").val(""),I.default_value=""),"simple_phone"==a?($("#"+active_element+" > fieldset").remove(),b='<label class="description" for="element_'+I.id+'">'+I.title.replace(/\n/g,"<br />")+'</label><div><input id="element_'+I.id+'" name="element_'+I.id+'" class="element text medium" type="text" maxlength="255" value=""/></div>',$("#"+active_element).append(b),$("#element_default_value").val(""),I.default_value="",$("#prop_default_phone").hide(),$("#prop_default_value").show()):"phone"==a&&(g="element_"+I.id+"_1",b="element_"+I.id+"_2",v="element_"+I.id+"_3",v='<fieldset><span class="description">'+I.title.replace(/\n/g,"<br />")+'</span><span><input id="'+g+'" name="'+g+'" class="element text" size="3" maxlength="3" value="" type="text" /> -<label for="'+g+'">###</label></span><span><input id="'+b+'" name="'+b+'" class="element text" size="3" maxlength="3" value="" type="text" /> -<label for="'+b+'">###</label></span><span><input id="'+v+'" name="'+v+'" class="element text" size="4" maxlength="4" value="" type="text" /><label for="'+v+'">####</label></span></fieldset>',$("#"+active_element+" > div").remove(),$("#"+active_element+" > label").remove(),$("#"+active_element).append(v),I.default_value="",$("#element_default_phone1").val(""),$("#element_default_phone2").val(""),$("#element_default_phone3").val(""),$("#prop_default_value").hide(),$("#prop_default_phone").show()),I.type=a):"element_time_showsecond"==e?(1==a?$("#"+active_element+" > fieldset > span:not('.description')").first().next().replaceWith('<span><input type="text" size="2" class="text" readonly="readonly"> : <label>MM</label></span><span><input type="text" size="2" class="text" readonly="readonly"><label>SS</label></span>'):$("#"+active_element+" > fieldset > span:not('.description')").first().next().next().remove().end().prev().next().replaceWith('<span><input type="text" size="2" class="text" readonly="readonly"><label>MM</label></span>'),I.time_showsecond=a):"element_time_24hour"==e?(1==a?$("#"+active_element+" > fieldset > span").last().remove():(v='<span><select name="element_'+I.id+'_4" id="element_'+I.id+'_4" style="width: 4em;" class="element select"><option value="AM">AM</option><option value="PM">PM</option></select><label>AM/PM</label></span>',$("#"+active_element+" > fieldset").append(v)),I.time_24hour=a):"submit_use_image"==e?($("#"+active_element+" input").removeClass("hide"),1==a?($("#"+active_element+" input.btn_submit").addClass("hide"),""==I.submit_primary_img||null==I.submit_primary_img?$("#submit_primary_img").val("http://"):$("#submit_primary_img").val(I.submit_primary_img),""==I.submit_secondary_img||null==I.submit_secondary_img?$("#submit_secondary_img").val("http://"):$("#submit_secondary_img").val(I.submit_secondary_img),$("#"+active_element).hasClass("firstpage")?($("#lbl_submit_secondary_img").hide(),$("#submit_secondary_img").hide()):($("#lbl_submit_secondary_img").show(),$("#submit_secondary_img").show()),$("#div_submit_use_text").hide(),$("#div_submit_use_image").show()):($("#"+active_element+" input.img_submit").addClass("hide"),$("#submit_primary_text").val(I.submit_primary_text),$("#submit_secondary_text").val(I.submit_secondary_text),$("#"+active_element).hasClass("firstpage")?($("#lbl_submit_secondary_text").hide(),$("#submit_secondary_text").hide()):($("#lbl_submit_secondary_text").show(),$("#submit_secondary_text").show()),$("#div_submit_use_image").hide(),$("#div_submit_use_text").show()),I.submit_use_image=a):"submit_primary_text"==e?($("#btn_submit_"+I.id).val(a),I.submit_primary_text=a):"submit_secondary_text"==e?($("#btn_prev_"+I.id).val(a),I.submit_secondary_text=a):"submit_primary_img"==e?($("#img_submit_"+I.id).attr("src",a),I.submit_primary_img=a):"submit_secondary_img"==e?($("#img_prev_"+I.id).attr("src",a),I.submit_secondary_img=a):"element_matrix_allow_multiselect"==e?(x=y="",x=1==a?(y="checkbox","radio"):(y="radio","checkbox"),C=w=k="",$("#"+active_element+" table tbody").find("tr").each(function(){$(this).find("td input[type="+x+"]").each(function(){k=$(this).attr("id"),w=$(this).attr("name"),C=$(this).val(),$(this).replaceWith($('<input type="'+y+'" id="'+k+'" name="'+w+'" value="'+C+'" />'))})}),I.matrix_allow_multiselect=a):"element_address_hideline2"==e?(1==a?$("#"+active_element+"_span_2").slideUp():$("#"+active_element+"_span_2").slideDown(),I.address_hideline2=a):"element_address_us_only"==e&&(1==a?($("#element_"+I.id+"_6").val("United States").prop("disabled",!0),$("#element_countries").val("United States").prop("disabled",!0),q='<select class="element select large" id="element_'+I.id+'_4" name="element_'+I.id+'_4"><option value="">Select a State</option><option value="Alabama" >Alabama</option><option value="Alaska" >Alaska</option><option value="Arizona" >Arizona</option><option value="Arkansas" >Arkansas</option><option value="California" >California</option><option value="Colorado" >Colorado</option><option value="Connecticut" >Connecticut</option><option value="Delaware" >Delaware</option><option value="Delaware" >District of Columbia</option><option value="Florida" >Florida</option><option value="Georgia" >Georgia</option><option value="Hawaii" >Hawaii</option><option value="Idaho" >Idaho</option><option value="Illinois" >Illinois</option><option value="Indiana" >Indiana</option><option value="Iowa" >Iowa</option><option value="Kansas" >Kansas</option><option value="Kentucky" >Kentucky</option><option value="Louisiana" >Louisiana</option><option value="Maine" >Maine</option><option value="Maryland" >Maryland</option><option value="Massachusetts" >Massachusetts</option><option value="Michigan" >Michigan</option><option value="Minnesota" >Minnesota</option><option value="Mississippi" >Mississippi</option><option value="Missouri" >Missouri</option><option value="Montana" >Montana</option><option value="Nebraska" >Nebraska</option><option value="Nevada" >Nevada</option><option value="New Hampshire" >New Hampshire</option><option value="New Jersey" >New Jersey</option><option value="New Mexico" >New Mexico</option><option value="New York" >New York</option><option value="North Carolina" >North Carolina</option><option value="North Dakota" >North Dakota</option><option value="Ohio" >Ohio</option><option value="Oklahoma" >Oklahoma</option><option value="Oregon" >Oregon</option><option value="Pennsylvania" >Pennsylvania</option><option value="Rhode Island" >Rhode Island</option><option value="South Carolina" >South Carolina</option><option value="South Dakota" >South Dakota</option><option value="Tennessee" >Tennessee</option><option value="Texas" >Texas</option><option value="Utah" >Utah</option><option value="Vermont" >Vermont</option><option value="Virginia" >Virginia</option><option value="Washington" >Washington</option><option value="West Virginia" >West Virginia</option><option value="Wisconsin" >Wisconsin</option><option value="Wyoming" >Wyoming</option></select>',$("#element_"+I.id+"_4").replaceWith(q)):($("#element_"+I.id+"_6").val("United States").prop("disabled",!1),$("#element_countries").val("United States").prop("disabled",!1),q='<input type="text" value="" class="element text large" name="element_'+I.id+'_4" id="element_'+I.id+'_4">',$("#element_"+I.id+"_4").replaceWith(q)),I.address_us_only=a,I.default_value="United States")}function add_element(e){var t=$("#form_header").data("form_properties").id;$("#li_dummy").length&&($("#li_dummy").remove(),$("#no_fields_notice").remove());var a=$("#form_builder_sortable > li").not(".li_pagination").size()+1,i=a;(0==$("#li_lastpage").length?$('<li id="li_temp_'+i+'" class="click_processing"><span class="spinner icon-spinner4"></span> creating field ...</li>').appendTo("#form_builder_sortable"):$('<li id="li_temp_'+i+'" class="click_processing"><span class="spinner icon-spinner4"></span> creating field ...</li>').insertBefore("#li_lastpage")).hide().fadeIn(),$.ajax({type:"POST",async:!0,url:"add_field.php",data:{element_type:e,form_id:t,holder_id:"li_temp_"+i,position:a,action:"click_new"},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#form_builder_sortable .click_processing").remove()},success:function(e){var t;"ok"==e.status?((t=$(e.markup)).data("field_properties",e.field_properties).addClass("synched"),$("#"+e.holder_id).replaceWith(t),$("#li_"+e.element_id).hide().fadeIn(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions")):($("#dialog-message").dialog("open"),$("#form_builder_sortable .click_processing").remove())}})}function add_matrix_row(e){var t=$("#form_header").data("form_properties").id,i=$("#"+active_element),_=$("#form_builder_sortable > li").not(".li_pagination").size()+1+$("#form_builder_sortable li.matrix table tr").length,a=(e.attr("id").split("_")[1],$("#"+active_element+" table th").length),n='<tr id="mr_temp_'+_+'" class="matrix_row_processing"><td colspan="'+a+'"><img src="images/loader_small.gif" style="vertical-align: middle"/> creating new row ...</td></tr>',o=$("#element_matrix_row li").index(e.parent())+1;$("#"+active_element+" table tr:eq("+o+")").after(n);n='<li id="li_mr_temp_'+_+'" class="li_mr_temp_holder"><input type="text" disabled="disabled" value="creating new row ..." autocomplete="off" class="text" id="matrixrow_'+_+'" /> <a href="#" class="add_choice" title="Add" id="matrixrowadd_'+_+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Remove Permanently" id="matrixrowdel_'+_+'"><span class="icon-remove"></span></a></li>';e.parent().after(n),$.ajax({type:"POST",async:!0,url:"add_matrix_row.php",data:{form_id:t,row_holder_id:"mr_temp_"+_,prop_holder_id:"li_mr_temp_"+_,allow_multiselect:i.data("field_properties").matrix_allow_multiselect,matrix_parent_id:i.data("field_properties").id,position:o+1,column_data:i.data("field_properties").options[i.data("field_properties").id].column_data,total_column:a-1},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#mr_temp_"+_).remove(),$("#li_mr_temp_"+_).remove()},success:function(e){var t,a;"ok"==e.status?(a=e.element_id,(t=i.data("field_properties").options)[a]=e.new_row_data,i.data("field_properties").options=t,$("#"+e.row_holder_id).replaceWith(e.new_row_markup),$("#"+e.prop_holder_id).replaceWith(e.new_prop_markup),$("#matrixrow_"+a).focus(),a=$("#matrixrow_"+a).parent().nextAll().children().filter("input.text"),$.each(a,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position++})):($("#dialog-message").dialog("open"),$("#mr_temp_"+_).remove(),$("#li_mr_temp_"+_).remove())}})}function delete_matrix_row(e){var i=e.attr("id").split("_")[1],t=($("#"+active_element),$("#form_header").data("form_properties").id),a=$("#content").data("csrftoken");if($("#element_matrix_row > li").size()<=1)return $("#ui-dialog-title-dialog-warning").html("Unable to delete this row!"),$("#dialog-warning-msg").html("You cannot delete all rows! <br />At least 1 row is required."),$("#dialog-warning").dialog("open"),!1;var e=$("#"+active_element+" table th").length,_=$("#mr_"+i).html();$("#mr_"+i).addClass("matrix_row_processing").html('<td colspan="'+e+'"><img src="images/loader_small.gif" style="vertical-align: middle"/> deleting row ...</td>'),$("#matrixrow_"+i).prop("disabled",!0),$("#matrixrowadd_"+i).fadeOut("fast"),$("#matrixrowdel_"+i).fadeOut("fast"),$.ajax({type:"POST",async:!0,url:"delete_matrix_row.php",data:{form_id:t,element_id:i,csrf_token:a},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#mr_"+i).removeClass("matrix_row_processing").html(_),$("#matrixrow_"+i).prop("disabled",!1),$("#matrixrowadd_"+i).show(),$("#matrixrowdel_"+i).show()},success:function(e){var t,i;"ok"==e.status?(t=e.element_id,delete(e=(i=$("#"+active_element)).data("field_properties").options)[t],i.data("field_properties").options=e,e=$("#matrixrow_"+t).parent().nextAll().children().filter("input.text"),$.each(e,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position--}),$("#matrixrow_"+t).parent().fadeOut("normal",function(){$(this).remove()}),$("#mr_"+t).fadeOut("normal",function(){var a,e;$(this).remove(),0<$("#"+active_element+" tbody tr:gt(0)").length?(e=$("#"+active_element+" tbody tr:gt(0)"),a=new Array,e.each(function(e){var t=$(this).attr("id").split("_");a[e]=t[1]}),e=a.join(","),i.data("field_properties").constraint=e):i.data("field_properties").constraint=""})):($("#dialog-message").dialog("open"),$("#mr_"+t).removeClass("matrix_row_processing").html(_),$("#matrixrow_"+t).prop("disabled",!1),$("#matrixrowadd_"+t).show(),$("#matrixrowdel_"+t).show())}})}function add_matrix_column(e){var t=e.attr("id").split("_")[1],i=$("#"+active_element),_=i.data("field_properties").id,a=parseInt(i.data("field_properties").last_option_id)+1;i.data("field_properties").last_option_id=a;var n=$("#mc_"+_+"_"+t).index();$("#mc_"+_+"_"+t).after('<th scope="col" id="mc_'+_+"_"+a+'">&nbsp;</th>');var o,l="",l=1==i.data("field_properties").matrix_allow_multiselect?"checkbox":"radio",r=new Array;$("#"+active_element+" table tbody").find("tr").each(function(){r=$(this).attr("id").split("_"),o=r[1],$(this).find("td").eq(n).after('<td><input type="'+l+'" value="'+a+'" name="element_'+o+'" id="element_'+o+"_"+a+'"></td>')});var s=$("#"+active_element+" table th").length,t=2*(100/s),s=(100-(t=Math.round(t)))/(s-1),s=Math.round(s);$("#"+active_element+" table th:eq(0)").css("width",t+"%"),$("#"+active_element+" table th:gt(0)").css("width",s+"%");s='<li><input type="text" value="" autocomplete="off" class="text" id="matrixcol_'+a+'" /> <a href="#" class="add_choice" title="Add" id="matrixcoladd_'+a+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Remove Permanently" id="matrixcoldel_'+a+'"><span class="icon-remove"></span></a></li>';e.parent().after(s),$("#matrixcol_"+a).focus();e=i.data("field_properties").options[_].column_data,s=n+1;e[a]={column_title:"",is_db_live:0,position:s},i.data("field_properties").options[_].column_data=e;e=$("#matrixcol_"+a).parent().nextAll().children().filter("input.text");$.each(e,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[_].column_data[a[1]].position++})}function delete_matrix_column(e){var t=e.attr("id").split("_")[1],i=$("#"+active_element),_=i.data("field_properties").id;if($("#element_matrix_column > li").size()<=1)return $("#ui-dialog-title-dialog-warning").html("Unable to delete this column!"),$("#dialog-warning-msg").html("You cannot delete all columns! <br />At least 1 column is required."),$("#dialog-warning").dialog("open"),!1;e=i.data("field_properties").options[_].column_data;delete e[t],i.data("field_properties").options[_].column_data=e;e=$("#matrixcol_"+t).parent().nextAll().children().filter("input.text");$.each(e,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[_].column_data[a[1]].position--}),$("#matrixcol_"+t).parent().remove();var a=$("#mc_"+_+"_"+t).index();$("#mc_"+_+"_"+t).remove(),$("#"+active_element+" table tbody").find("tr").each(function(){$(this).find("td").eq(a).remove()})}function set_form_properties(e,a){var i,_,n,o,l,t,r=$("#form_header").data("form_properties");if("form_title"==e)$("#form_header_title").html(a.replace(/\n/g,"<br />")),r.name=a;else if("form_description"==e)$("#form_header_desc").html(a.replace(/\n/g,"<br />")),r.description=a;else if("form_review_title"==e)r.review_title=a;else if("form_review_description"==e)r.review_description=a;else if("form_resume_subject"==e)r.resume_subject=a;else if("form_resume_content"==e)r.resume_content=a;else if("form_resume_from_name"==e)r.resume_from_name=a;else if("form_resume_from_email_address"==e)r.resume_from_email_address=a;else if("form_label_alignment"==e)$("#form_builder_sortable > li").not(".li_pagination").css("width",""),$("#form_builder_preview").removeClass("top_label right_label left_label").addClass(a),r.label_alignment=a;else if("form_language"==e)r.language=a;else if("form_redirect_enable"==e)1==a?($("#form_success_message").hide(),$("#form_redirect_url").show().focus().select()):($("#form_success_message").show().focus().select(),$("#form_redirect_url").hide()),r.redirect_enable=a;else if("form_review_use_image"==e)1==a?($("#div_review_use_image").show(),$("#div_review_use_text").hide()):($("#div_review_use_image").hide(),$("#div_review_use_text").show()),r.review_use_image=a;else if("form_success_message"==e)r.success_message=a;else if("form_redirect"==e)r.redirect=a;else if("form_custom_script_url"==e)r.custom_script_url=a;else if("form_review"==e)r.review=a,1==$("#li_lastpage").length&&1==a?"Submit"==$("#li_lastpage").data("field_properties").submit_primary_text&&($("#li_lastpage").data("field_properties").submit_primary_text="Continue",$("#btn_submit_lastpage").val("Continue")):1==$("#li_lastpage").length&&0==a&&"Continue"==$("#li_lastpage").data("field_properties").submit_primary_text&&($("#li_lastpage").data("field_properties").submit_primary_text="Submit",$("#btn_submit_lastpage").val("Submit")),1==a?$("#form_prop_review").slideDown("slow",function(){adjust_main_height(),$("#form_prop_review").show()}):$("#form_prop_review").slideUp("slow",function(){adjust_main_height()});else if("review_primary_text"==e)r.review_primary_text=a;else if("review_primary_img"==e)r.review_primary_img=a;else if("review_secondary_text"==e)r.review_secondary_text=a;else if("review_secondary_img"==e)r.review_secondary_img=a;else if("form_resume_enable"==e)1==(r.resume_enable=a)?$("#form_prop_resume").slideDown("slow",function(){adjust_main_height(),$("#form_prop_resume").show()}):$("#form_prop_resume").slideUp("slow",function(){adjust_main_height()});else if("entry_edit_enable"==e)if(1==(r.entry_edit_enable=a)){if(1==a&&1==r.encryption_enable)return $("#form_allow_edit_completed_entry").prop("checked",!1),r.entry_edit_enable=0,$("#ui-dialog-title-dialog-warning").html("Feature unavailable."),$("#dialog-warning-msg").html("This feature cannot be used when <strong>Data Encryption</strong> is enabled on your form."),$("#dialog-warning").dialog("open"),!1;$("#div_form_allow_edit_completed_entry").slideDown("fast",function(){adjust_main_height(),$("#div_form_allow_edit_completed_entry").show()})}else $("#div_form_allow_edit_completed_entry").slideUp("fast",function(){adjust_main_height()});else"form_password"==e?r.password=a:"form_limit"==e?r.limit=parseInt(a):"form_unique_ip_maxcount"==e?r.unique_ip_maxcount=parseInt(a):"form_pagination_type"==e&&(t=$("#form_builder_sortable > li.page_break"),i=t.length,_=1,l=o=n="",t.each(function(e){var t=$(this);_=e+1,"li_lastpage"!=t.attr("id")?(e=t.data("field_properties").id,$("#pagenum_"+e).text(_),$("#pagetotal_"+e).text("Page "+_+" of "+i),l=1==_?(o=" ap_tp_num_active"," ap_tp_text_active"):o="","steps"==a&&(n+='<td align="center"><span id="page_num_'+_+'" class="ap_tp_num'+o+'">'+_+'</span><span id="page_title_'+_+'" class="ap_tp_text'+l+'">'+t.data("field_properties").page_title+'</span></td><td align="center" class="ap_tp_arrow">&gt;</td>')):($("#pagenum_lastpage").text(_),$("#pagetotal_lastpage").text("Page "+_+" of "+i),n+='<td align="center"><span id="page_num_'+_+'" class="ap_tp_num">'+_+'</span><span id="page_title_'+_+'" class="ap_tp_text">'+t.data("field_properties").page_title+"</span></td>")}),$("#pagination_header").children().remove(),"steps"==a?(e='<table class="ap_table_pagination" width="100%" border="0" cellspacing="0" cellpadding="0"><tr>'+n+"</tr></table>",$("#pagination_header").append(e)):"percentage"==a?($("#pagination_header").append('<h3 id="page_title_1">Page 1 of 1 - Page Title</h3><div class="mf_progress_container"><div id="mf_progress_percentage" class="mf_progress_value" style="width: 1%"><span>1%</span></div></div>'),$("#page_title_1").html("Page 1 of "+i+" - "+t.eq(0).data("field_properties").page_title),t=Math.round(1/i*100),$("#mf_progress_percentage > span").html(t+"%"),$("#mf_progress_percentage").animate({width:t+"%"},{duration:200,queue:!1})):$("#pagination_header").append('<h3 class="no_header">Pagination Header Disabled</h3>'),"disabled"==a?$("#prop_pagination_titles").fadeOut("slow"):"disabled"==r.pagination_type&&$("#prop_pagination_titles").slideDown(),r.pagination_type=a)}function adjust_main_height(){var e=75;$.browser.msie&&(e=-10);var t=$("#sidebar").offset().top+$("#sidebar").outerHeight()-e,e=$("#header").outerHeight()+$("#header_content").outerHeight()+$("#content").outerHeight();e<t&&(e=t-e,$("#main").animate({"padding-bottom":e+"px"},{duration:200,queue:!0}))}function update_date_range_min_linked(e){$("#date_range_min_mm").val(e.length?e[0].getMonth()+1:""),$("#date_range_min_dd").val(e.length?e[0].getDate():""),$("#date_range_min_yyyy").val(e.length?e[0].getFullYear():""),set_properties("element_date_range_min",$("#date_range_min_yyyy").val()+"-"+$("#date_range_min_mm").val()+"-"+$("#date_range_min_dd").val())}function update_date_range_max_linked(e){$("#date_range_max_mm").val(e.length?e[0].getMonth()+1:""),$("#date_range_max_dd").val(e.length?e[0].getDate():""),$("#date_range_max_yyyy").val(e.length?e[0].getFullYear():""),set_properties("element_date_range_max",$("#date_range_max_yyyy").val()+"-"+$("#date_range_max_mm").val()+"-"+$("#date_range_max_dd").val())}function update_scheduling_start_linked(e){$("#scheduling_start_mm").val(e.length?e[0].getMonth()+1:""),$("#scheduling_start_dd").val(e.length?e[0].getDate():""),$("#scheduling_start_yyyy").val(e.length?e[0].getFullYear():"");e=$("#scheduling_start_yyyy").val()+"-"+$("#scheduling_start_mm").val()+"-"+$("#scheduling_start_dd").val();$("#form_header").data("form_properties").schedule_start_date=e}function update_scheduling_end_linked(e){$("#scheduling_end_mm").val(e.length?e[0].getMonth()+1:""),$("#scheduling_end_dd").val(e.length?e[0].getDate():""),$("#scheduling_end_yyyy").val(e.length?e[0].getFullYear():"");e=$("#scheduling_end_yyyy").val()+"-"+$("#scheduling_end_mm").val()+"-"+$("#scheduling_end_dd").val();$("#form_header").data("form_properties").schedule_end_date=e}function reorganize_page_break(){var a,i,_,n,o,e=$("#form_builder_sortable > li.page_break"),l=$("#form_header").data("form_properties").pagination_type,r='<li class="no_fields_in_page" title="Drag the button on the right side here to add new field."><span style="float: none;font-family: machform;margin-bottom: 20px;color: #529214;font-size: 50px;display: block" class="icon-arrow-right"></span><h3>This page has no fields!</h3><p><span style="color: #529214; font-weight: bold; float: none">Drag the button</span> on the right sidebar here to add new field.</p></li>';1<=e.not("#li_lastpage").length?(1==$("#li_lastpage").length&&$("#li_lastpage").appendTo("#form_builder_sortable"),1==e.not("#li_lastpage").length?(0==$("#pagination_header").length?($("#form_builder_sortable").prepend('<li id="pagination_header" style="display: none" class="li_pagination" title="Click to edit"><table class="ap_table_pagination" width="100%" border="0" cellspacing="0" cellpadding="0"><tr><td align="center"><span id="page_num_1" class="ap_tp_num ap_tp_num_active">1</span><span id="page_title_1" class="ap_tp_text ap_tp_text_active">Untitled Page</span></td><td align="center" class="ap_tp_arrow">&gt;</td><td align="center"><span id="page_num_2" class="ap_tp_num">2</span><span id="page_title_2" class="ap_tp_text">Untitled Page</span></td></tr></table></li>'),$("#pagination_header").fadeIn(),$("#pagination_header").click(function(e){$("#form_header").data("coming_from_click",1),select_form_header($(this).attr("id"))})):"steps"==l?($("#pagination_header td:gt(2)").remove(),$("#page_num_1").html("1"),$("#page_num_2").html("2"),$("#page_title_1").html($("#form_builder_sortable > li.page_break").not(".li_pagination").not("#li_lastpage").data("field_properties").page_title),$("#page_title_2").html($("#li_lastpage").data("field_properties").page_title)):"percentage"==l&&($("#page_title_1").html("Page 1 of 2 - "+$("#form_builder_sortable > li.page_break").not(".li_pagination").not("#li_lastpage").data("field_properties").page_title),$("#mf_progress_percentage").animate({width:"50%"},{duration:200,queue:!1}),$("#mf_progress_percentage > span").html("50%")),0==$("#li_lastpage").length?($('<li id="li_lastpage" class="page_break" title="Click to edit">'+e.html().replace(/_[0-9]+/g,"_lastpage")+"</li>").appendTo("#form_builder_sortable").addClass("synched"),$("#pagenum_lastpage").text("2"),$("#pagetotal_lastpage").text("Page 2 of 2"),$("#btn_submit_lastpage").val("Submit"),$("#li_lastpage").prev().hasClass("page_break")&&$("#li_lastpage").before(r),$("#li_lastpage").data("field_properties",{id:"lastpage",type:"page_break",page_title:"Untitled Page",submit_primary_text:"Submit",submit_secondary_text:"Previous"})):(a=2,$("#form_builder_sortable > li.page_break").each(function(e){var t=e+1;"li_lastpage"!=$(this).attr("id")?(e=$(this).data("field_properties").id,$("#pagenum_"+e).text(t),$("#pagetotal_"+e).text("Page "+t+" of "+a)):($("#pagenum_lastpage").text(t),$("#pagetotal_lastpage").text("Page "+t+" of "+a))})),1==e.index()&&(0==$("#form_builder_sortable > li").not(".li_pagination").not(".page_break").not(".li_lastpage").length?(e.before(r),e.after(r)):e.before(r))):(a=e.length,i=1,o=n=_="","steps"==l&&$("#pagination_header td").remove(),e.each(function(e){var t=$(this);1==t.index()&&t.before(r),t.prev().hasClass("page_break")&&t.before(r),t.next().hasClass("page_break")&&t.after(r),i=e+1,"li_lastpage"!=t.attr("id")?(e=t.data("field_properties").id,$("#pagenum_"+e).text(i),$("#pagetotal_"+e).text("Page "+i+" of "+a),o=1==i?(n=" ap_tp_num_active"," ap_tp_text_active"):n="","steps"==l&&(_+='<td align="center"><span id="page_num_'+i+'" class="ap_tp_num'+n+'">'+i+'</span><span id="page_title_'+i+'" class="ap_tp_text'+o+'">'+t.data("field_properties").page_title+'</span></td><td align="center" class="ap_tp_arrow">&gt;</td>')):($("#pagenum_lastpage").text(i),$("#pagetotal_lastpage").text("Page "+i+" of "+a),_+='<td align="center"><span id="page_num_'+i+'" class="ap_tp_num">'+i+'</span><span id="page_title_'+i+'" class="ap_tp_text">'+t.data("field_properties").page_title+"</span></td>")}),"steps"==l?$("#pagination_header tr").append(_):"percentage"==l&&($("#page_title_1").html("Page 1 of "+a+" - "+e.eq(0).data("field_properties").page_title),e=Math.round(1/a*100),$("#mf_progress_percentage").animate({width:e+"%"},{duration:200,queue:!1}),$("#mf_progress_percentage > span").html(e+"%"))),$("#form_builder_sortable > li.no_fields_in_page").each(function(e){var t=$(this);1==t.index()?0==t.next().hasClass("page_break")&&t.remove():0!=t.prev().hasClass("page_break")&&0!=t.next().hasClass("page_break")||t.remove()}),$("#form_builder_sortable > li.firstpage").removeClass("firstpage"),$("#form_builder_sortable > li.page_break:eq(0)").addClass("firstpage"),$("#form_resume").prop("disabled",!1)):($("#pagination_header").remove(),$("#li_lastpage").remove(),0<$("#form_builder_sortable > li").not(".no_fields_in_page").length?$("#form_builder_sortable > li.no_fields_in_page").remove():($("#form_builder_sortable > li.no_fields_in_page").remove(),$("#form_builder_sortable").append(r)),$("#form_header").data("form_properties").resume_enable=0,$("#form_resume").prop("checked",!1),$("#form_resume").prop("disabled",!0))}function rebuild_quantity_link_dropdown(){var e=$("#form_builder_sortable > li.multiple_choice,#form_builder_sortable > li.dropdown,#form_builder_sortable > li.checkboxes,#form_builder_sortable > li.price"),_=0,n=new Array,o=new Array;e.each(function(e){var t,a=0,i=$(this).data("field_properties"),a=0<$("#pagination_header").length?i.position:parseInt(i.position)+1;"checkbox"==i.type?(t=i.options,$.each(t,function(e,t){n[_]=t.option+" (#"+a+")",o[_]="element_"+i.id+"_"+e,_++})):(n[_]=i.title+" (#"+a+")",o[_]="element_"+i.id,_++)}),$("#prop_number_quantity_link > option").remove(),$("#prop_number_quantity_link").append('<option value="">-- Please Select --</option>'),$.each(n,function(e,t){t='<option value="'+o[e]+'">'+t+"</option>";$("#prop_number_quantity_link").append(t)}),0==n.length&&($("#prop_number_quantity_link > option").remove(),$("#prop_number_quantity_link").append('<option value=""> -- No supported fields available --</option>'))}function random_string(e,t){for(var a="",i=e;0<i;--i)a+=t[Math.round(Math.random()*(t.length-1))];return a}function rebuild_default_text_random_preview(){var e=$("#"+active_element).data("field_properties"),t="",a=parseInt(e.text_default_length);if(0==a&&(a=10),"letter"==e.text_default_random_type)switch(e.text_default_case){case"u":t="ABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case"l":t="abcdefghijklmnopqrstuvwxyz";break;case"b":t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}else if("number"==e.text_default_random_type)t="0123456789";else if("alphanum"==e.text_default_random_type)switch(e.text_default_case){case"u":t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case"l":t="0123456789abcdefghijklmnopqrstuvwxyz";break;case"b":t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}else if("all"==e.text_default_random_type)switch(e.text_default_case){case"u":t="\"'`~!@#$%^&*()_-+={}[]|\\:;<>,.?/0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ";break;case"l":t="\"'`~!@#$%^&*()_-+={}[]|\\:;<>,.?/0123456789abcdefghijklmnopqrstuvwxyz";break;case"b":t="\"'`~!@#$%^&*()_-+={}[]|\\:;<>,.?/0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"}$("#"+active_element+" :input").val(e.text_default_prefix+random_string(a,t))}$(function(){$("#tab_field_properties").show(),$("#tab_form_properties").show(),$("#builder_tabs_btn").show(),$("#builder_tabs").tabs(),$("#builder_tabs").bind("tabsshow",function(e,t){0===t.index?($("#"+active_element).removeClass("highlighted"),active_element=null,$("#form_header .highlighted").removeClass("highlighted"),$("#pagination_header").removeClass("highlighted"),$("#selected_field_image").css("visibility","hidden"),$("#form_prop_toggle_a").text("show more options"),$("#all_form_properties .advanced_prop").hide(),$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),check_synch_fields()):1===t.index?($("#form_header .highlighted").removeClass("highlighted"),$("#pagination_header").removeClass("highlighted"),$("#form_prop_toggle_a").text("show more options"),$("#all_form_properties .advanced_prop").hide(),null===active_element&&($("#element_properties_form").hide(),$("#element_inactive_msg").show())):2===t.index&&1!=$("#form_header").data("coming_from_click")&&select_form_header("form_header_title")}),$("#form_builder_sortable").sortable({items:"li:not(.li_pagination,#li_lastpage)",axis:"y",opacity:.7,placeholder:"ui-state-highlight",scrollSensitivity:100,scrollSpeed:40,receive:function(e,t){var a=$("#form_header").data("form_properties").id;$("#li_dummy").length&&($("#li_dummy").remove(),$("#no_fields_notice").remove());var i=$("#form_builder_sortable > li").not(".li_pagination").size()+1,_=$(t.sender).attr("id");$("#form_builder_sortable .ui-draggable").attr("id","li_temp_"+i).removeClass("box ui-draggable").addClass("drop_processing").html('<span class="spinner icon-spinner4"></span> creating field ...').hide().fadeIn();var n,t=$("#li_temp_"+i).index()+1;switch(_){case"btn_single_line_text":n="text";break;case"btn_number":n="number";break;case"btn_paragraph_text":n="textarea";break;case"btn_checkboxes":n="checkbox";break;case"btn_multiple_choice":n="radio";break;case"btn_drop_down":n="select";break;case"btn_name":n="simple_name";break;case"btn_date":n="date";break;case"btn_time":n="time";break;case"btn_phone":n="phone";break;case"btn_address":n="address";break;case"btn_website":n="url";break;case"btn_price":n="money";break;case"btn_email":n="email";break;case"btn_section_break":n="section";break;case"btn_file_upload":n="file";break;case"btn_page_break":n="page_break";break;case"btn_matrix":n="matrix";break;case"btn_signature":n="signature";break;case"btn_media":n="media";break;default:n="text"}$.ajax({type:"POST",async:!0,url:"add_field.php",data:{element_type:n,form_id:a,holder_id:"li_temp_"+i,position:t,action:"drag_new"},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#form_builder_sortable .drop_processing").remove()},success:function(e){var t;"ok"==e.status?((t=$(e.markup)).data("field_properties",e.field_properties).addClass("synched"),$("#"+e.holder_id).replaceWith(t),$("#li_"+e.element_id).hide().fadeIn(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions")):($("#dialog-message").dialog("open"),$("#form_builder_sortable .drop_processing").remove())}})},update:function(e,t){$(t.item).hasClass("no_fields_in_page")?$(this).sortable("cancel"):(!1===$(t.item).hasClass("drop_processing")&&($("#builder_tabs").tabs("select",1),select_element("#"+$(t.item).attr("id"))),reorganize_page_break(),1==$(t.item).hasClass("firstpage")&&select_element("#"+$(t.item).attr("id")))}}),$("#form_builder_sortable").disableSelection(),$(document).ready(function(){sidebar_scroll_pos=$("#sidebar").position().top,isScrolledIntoView("#bottom_bar_limit")?$("#bottom_bar").css("position","relative").addClass("bottom_bar_white"):$("#bottom_bar").css("position","fixed").removeClass("bottom_bar_white"),$(window).scroll(function(){sidebar_pos=isScrolledIntoView("#header_content")?sidebar_scroll_pos-15:sidebar_scroll_pos-105;var e=sidebar_pos+$(document).scrollTop()+"px";0===$("#builder_tabs").tabs("option","selected")&&$("#sidebar").animate({top:e},{duration:500,queue:!1}),isScrolledIntoView("#bottom_bar_limit")?$("#bottom_bar").css("position","relative").addClass("bottom_bar_white"):$("#bottom_bar").css("position","fixed").removeClass("bottom_bar_white")})}),$("#form_builder_preview").delegate("li:not(#pagination_header):not(.no_fields_in_page)","click",function(e){$("#builder_tabs").tabs("select",1),select_element("#"+$(this).attr("id"))}),$("#form_header_title,#form_header_desc,#pagination_header").click(function(e){$("#form_header").data("coming_from_click",1),select_form_header($(this).attr("id"))}),$("#bottom_bar_add_field").click(function(){$("#builder_tabs").tabs("select",0),sidebar_pos=isScrolledIntoView("#header_content")?sidebar_scroll_pos:sidebar_scroll_pos-100;var e=sidebar_pos+$(document).scrollTop()+"px";return $("#sidebar").animate({top:e},{duration:500,queue:!1}),$("#"+active_element).removeClass("highlighted"),active_element=null,$("#form_header .highlighted").removeClass("highlighted"),$("#selected_field_image").css("visibility","hidden"),$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),!1}),$("#bottom_bar_save_form").click(function(){if(0<$("#form_builder_sortable > li.no_fields_in_page").length)return $("#ui-dialog-title-dialog-warning").html("Unable to save. Your form contain empty pages!"),$("#dialog-warning-msg").html("Your form contain one or more empty pages<br />Please add a field into the empty page or delete the empty page."),$("#dialog-warning").dialog("open"),!1;$("#bottom_bar_msg").text("Please wait... Synching..."),$("#bottom_bar_content").fadeOut("fast",function(){$("#bottom_bar_loader").fadeIn()});var t,e=$("#form_header").data("form_properties").id,a=$("#form_builder_sortable > li").not(".dblive").not(".synched").not(".li_pagination").not("#li_lastpage");return 1<=a.length?(t=new Array,a.each(function(e){t[e]=$(this).data("field_properties")}),$.ajax({type:"POST",async:!0,url:"synch_fields.php",data:{form_id:e,fp:t},cache:!1,global:!1,dataType:"json",error:function(e,t,a){},success:function(e){"ok"==e.status&&($(e.updated_element_id).addClass("synched"),save_form())}})):save_form(),!1}),tippy("[data-tippy-content]",{trigger:"click",placement:"bottom",arrow:!0}),$("#element_label").bind("keyup mouseout",function(){set_properties("element_label",$(this).val())}),$("#element_required").bind("change",function(){var e=1==$(this).prop("checked")?"1":"0";set_properties("element_required",e)}),$("#element_unique").bind("change",function(){var e=1==$(this).prop("checked")?"1":"0";set_properties("element_unique",e)}),$("#element_readonly").bind("change",function(){var e=1==$(this).prop("checked")?"1":"0";set_properties("element_readonly",e)}),$("#element_public").bind("click",function(){var e=1==$(this).prop("checked")?"0":"1";set_properties("element_visibility",e)}),$("#element_hidden").bind("click",function(){var e=1==$(this).prop("checked")?"2":"0";set_properties("element_visibility",e)}),$("#element_private").bind("click",function(){var e=1==$(this).prop("checked")?"1":"0";set_properties("element_visibility",e)}),$("#element_media_image").bind("click",function(){1==$(this).prop("checked")&&set_properties("element_media_type","image")}),$("#element_media_video").bind("click",function(){1==$(this).prop("checked")&&set_properties("element_media_type","video")}),$("#element_media_pdf").bind("click",function(){1==$(this).prop("checked")&&set_properties("element_media_type","pdf")}),$("#element_default_value_text_static").bind("click",function(){1==$(this).prop("checked")&&set_properties("element_text_default_type","static")}),$("#element_default_value_text_random").bind("click",function(){1==$(this).prop("checked")&&set_properties("element_text_default_type","random")}),$("#element_text_default_length").bind("keyup mouseout",function(){set_properties("element_text_default_length",$(this).val())}),$("#element_text_default_prefix").bind("keyup mouseout",function(){set_properties("element_text_default_prefix",$(this).val())}),$("#element_text_default_random_type").bind("change",function(){set_properties("element_text_default_random_type",$(this).val())}),$("#element_text_default_case").bind("change",function(){set_properties("element_text_default_case",$(this).val())}),$("#element_instructions").bind("keyup mouseout",function(){set_properties("element_guidelines",$(this).val())}),$("#element_custom_css").bind("keyup mouseout",function(){set_properties("element_custom_css",$(this).val())}),$("#prop_confirmation_field_label").bind("keyup mouseout",function(){set_properties("element_email_confirm_field_label",$(this).val())}),$("#element_choices").delegate("input.text","keyup",function(e){var t,i,a=$(this),_=a.attr("id").split("_")[1],n="&nbsp;",o=$("#"+active_element),l=o.data("field_properties").options[_].position,r=o.data("field_properties").id,s=o.data("field_properties").type;13==e.keyCode?(t="","radio"==s||"select"==s?t="radio":"checkbox"==s&&(t="checkbox"),t='<li><input type="'+t+'" title="Select this choice as the default." class="choices_default" name="choices_default" id="choicedef_'+(e=parseInt(o.data("field_properties").last_option_id)+1)+'" /><input type="text" value="" autocomplete="off" class="text" id="choice_'+e+'" /> <a href="#" class="add_choice" title="Add Choice" id="choiceadd_'+e+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Hide Choice" id="choicedel_'+e+'"><span class="icon-cancel-circle"></span></a></li>',a.parent().after(t),o.data("field_properties").last_option_id=e,t="","radio"==s?(t='<span><input type="radio" value="1" class="element radio" name="element_'+r+'" id="element_'+r+"_"+e+'"><label for="element_'+r+"_"+e+'" class="choice">&nbsp;</label></span>',$("#element_"+r+"_"+_).parent().after(t)):"checkbox"==s?(t='<span><input type="checkbox" value="1" class="element checkbox" name="element_'+r+'" id="element_'+r+"_"+e+'"><label for="element_'+r+"_"+e+'" class="choice">&nbsp;</label></span>',$("#element_"+r+"_"+_).parent().after(t)):"select"==s&&(t='<option value="'+e+'">&nbsp;</option>',$("#element_"+r+" option[value="+_+"]").after(t)),$("#choice_"+e).focus(),(t=o.data("field_properties").options)[e]={position:l+1,option:"",is_default:0,is_hidden:0,is_db_live:"0"},o.data("field_properties").options=t,t=$("#element_choices input.text"),i=1,$.each(t,function(e,t){var a=$(t).attr("id").split("_");o.data("field_properties").options[a[1]].position=i,i++}),$.each(o.data("field_properties").options,function(e,t){"1"==o.data("field_properties").options[e].is_hidden&&(o.data("field_properties").options[e].position=i,i++)})):(""!=a.val()&&(n=a.val()),"select"==s?$("#element_"+r+" option[value="+_+"]").text(n):$("#element_"+r+"_"+_).next().html(n),o.data("field_properties").options[_].option=a.val())}),$("#element_choices").delegate("input.choices_default","click",function(e){var t=$(this),a=t.attr("id").split("_")[1],i=active_element.split("_")[1],_=$("#"+active_element),n=_.data("field_properties").type;"radio"==n||"select"==n?"0"==_.data("field_properties").options[a].is_default?("radio"==n?$("#element_"+i+"_"+a).prop("checked",!0):"select"==n&&$("#element_"+i).val(a),$(_.data("field_properties").options).each(function(e,t){$.each(t,function(e,t){_.data("field_properties").options[e].is_default="0"})}),_.data("field_properties").options[a].is_default="1"):("radio"==n?$("#element_"+i+"_"+a).prop("checked",!1):"select"==n&&(0==$("#element_"+i).find('option[value=""]').length&&$("#element_"+i).prepend('<option value=""></option>'),$("#element_"+i).val("")),$(_.data("field_properties").options).each(function(e,t){$.each(t,function(e,t){_.data("field_properties").options[e].is_default="0"})}),$(this).prop("checked",!1)):"checkbox"==n&&(1==t.prop("checked")?($("#element_"+i+"_"+a).prop("checked",!0),_.data("field_properties").options[a].is_default="1"):($("#element_"+i+"_"+a).prop("checked",!1),_.data("field_properties").options[a].is_default="0"))}),$("#element_choices").delegate("a.add_choice","click",function(e){var t=$(this),a=t.attr("id").split("_")[1],i=$("#"+active_element),_=i.data("field_properties").options[a].position,n=i.data("field_properties").id,o=i.data("field_properties").type,l="";"radio"==o||"select"==o?l="radio":"checkbox"==o&&(l="checkbox");var r=parseInt(i.data("field_properties").last_option_id)+1,l='<li><input type="'+l+'" title="Select this choice as the default." class="choices_default" name="choices_default" id="choicedef_'+r+'" /><input type="text" value="" autocomplete="off" class="text" id="choice_'+r+'" /> <a href="#" class="add_choice" title="Add Choice" id="choiceadd_'+r+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Hide Choice" id="choicedel_'+r+'"><span class="icon-cancel-circle"></span></a></li>';t.parent().after(l),i.data("field_properties").last_option_id=r;l="";"radio"==o?l='<span><input type="radio" value="1" class="element radio" name="element_'+n+'" id="element_'+n+"_"+r+'"><label for="element_'+n+"_"+r+'" class="choice">&nbsp;</label></span>':"checkbox"==o?l='<span><input type="checkbox" value="1" class="element checkbox" name="element_'+n+'" id="element_'+n+"_"+r+'"><label for="element_'+n+"_"+r+'" class="choice">&nbsp;</label></span>':"select"==o&&(l='<option value="'+r+'">&nbsp;</option>',$("#element_"+n+" option[value="+a+"]").after(l)),$("#element_"+n+"_"+a).parent().after(l),$("#choice_"+r).focus();l=i.data("field_properties").options;l[r]={position:_+1,option:"",is_default:0,is_hidden:0,is_db_live:"0"},i.data("field_properties").options=l;var l=$("#element_choices input.text"),s=1;return $.each(l,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position=s,s++}),$.each(i.data("field_properties").options,function(e,t){"1"==i.data("field_properties").options[e].is_hidden&&(i.data("field_properties").options[e].position=s,s++)}),!1}),$("#element_choices_hidden").delegate("a.unhide_choice","click",function(e){var t=$(this).attr("id").split("_")[1],i=$("#"+active_element),a=(i.data("field_properties").options[t].position,i.data("field_properties").id),_=i.data("field_properties").type,n=i.data("field_properties").options[t].option,o="";"radio"==_||"select"==_?o="radio":"checkbox"==_&&(o="checkbox");var l=$("#element_choices input.text").last().attr("id").split("_")[1],r=parseInt(t),o='<li><input type="'+o+'" title="Select this choice as the default." class="choices_default" name="choices_default" id="choicedef_'+r+'" /><input type="text" value="'+n+'" autocomplete="off" class="text" id="choice_'+r+'" /> <a href="#" class="add_choice" title="Add Choice" id="choiceadd_'+r+'"><span class="icon-plus-circle"></span></a><a href="#" class="del_choice" title="Hide Choice" id="choicedel_'+r+'"><span class="icon-cancel-circle"></span></a></li>';$("#element_choices").append(o),i.data("field_properties").last_option_id=r;o="";"radio"==_?o='<span><input type="radio" value="1" class="element radio" name="element_'+a+'" id="element_'+a+"_"+r+'"><label for="element_'+a+"_"+r+'" class="choice">'+n+"</label></span>":"checkbox"==_?o='<span><input type="checkbox" value="1" class="element checkbox" name="element_'+a+'" id="element_'+a+"_"+r+'"><label for="element_'+a+"_"+r+'" class="choice">'+n+"</label></span>":"select"==_&&(o='<option value="'+r+'">'+n+"</option>",$("#element_"+a+" option[value="+l+"]").after(o)),$("#element_"+a+"_"+l).parent().after(o),$("#choice_"+r).focus(),i.data("field_properties").options[r].is_hidden=0;var r=$("#element_choices input.text"),s=1;$.each(r,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position=s,s++}),$.each(i.data("field_properties").options,function(e,t){"1"==i.data("field_properties").options[e].is_hidden&&(i.data("field_properties").options[e].position=s,s++)}),$("#choiceunhide_"+t).parent().remove();t=parseInt($("#hidden_choices_counter").text())-1;return $("#hidden_choices_counter").text(t),0<t?$("#toggle_hidden_choices").show():($("#toggle_hidden_choices").hide(),$("#element_choices_hidden").hide(),$("#toggle_hidden_choices").css("font-weight","normal")),!1}),$("#element_choices").delegate("a.del_choice","click",function(e){if($("#element_choices > li").size()<=1)return $("#ui-dialog-title-dialog-warning").html("Unable to delete this choice!"),$("#dialog-warning-msg").html("You cannot delete all choices! <br />At least 1 choice is required."),$("#dialog-warning").dialog("open"),!1;var t=$(this).attr("id").split("_")[1],i=$("#"+active_element),a=(i.data("field_properties").options[t].position,i.data("field_properties").id),_=i.data("field_properties").type;i.data("field_properties").options[t].is_hidden=1,$("#choicedel_"+t).parent().remove();var n=$("#element_choices input.text"),o=1;$.each(n,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position=o,o++}),$.each(i.data("field_properties").options,function(e,t){"1"==i.data("field_properties").options[e].is_hidden&&(i.data("field_properties").options[e].position=o,o++)}),"radio"==_||"checkbox"==_?$("#element_"+a+"_"+t).parent().remove():"select"==_&&$("#element_"+a+" option[value="+t+"]").remove();t=parseInt($("#hidden_choices_counter").text())+1;return $("#hidden_choices_counter").text(t),0<t?$("#toggle_hidden_choices").show():$("#toggle_hidden_choices").hide(),!1}),$("#element_choices_hidden").delegate("a.trash_choice","click",function(e){var t=$(this).attr("id").split("_")[1],a=$("#"+active_element);a.data("field_properties").options[t].position,a.data("field_properties").id,a.data("field_properties").type;return $("#dialog-confirm-choice-delete").data("current_choice_option_id",t),$("#dialog-confirm-choice-delete").dialog("open"),!1}),$("#choice_max_entry").bind("keyup mouseout",function(){set_properties("element_choice_max_entry",$(this).val())}),$("#prop_choice_max_entry_enable").bind("change",function(){1==$(this).prop("checked")?$("#form_choice_max_entry").slideDown():($("#choice_max_entry").val(0),set_properties("element_choice_max_entry",0),$("#form_choice_max_entry").hide())}),$("#bulk_import_choices").click(function(){return $("#bulk_insert_choices").val(""),void 0!==$("#"+active_element).data("field_properties").options[1]&&"First option"==$("#"+active_element).data("field_properties").options[1].option&&3==$("#element_choices > li").size()&&$("#bulk_insert_choices").val("New option 1\nNew option 2\nNew option 3"),$("#dialog-insert-choices").next().children().eq(1).addClass("negative_btn"),$("#dialog-insert-choices").dialog("open"),$("#bulk_insert_choices").focus(),!1}),$("#toggle_hidden_choices").click(function(){var a,i,_,n,e,o;return $("#element_choices_hidden").is(":visible")?($("#element_choices_hidden").hide(),$("#toggle_hidden_choices").css("font-weight","normal")):(_=i=a="",e=(n=$("#"+active_element).data("field_properties")).options,o=new Array,$.each(e,function(e,t){o[t.position]=e}),"radio"==n.type||"select"==n.type?_="radio":"checkbox"==n.type&&(_="checkbox"),$.each(o,function(e,t){0<e&&"1"==n.options[t].is_hidden&&(choice_option_id=t,choice_label=n.options[t].option,choice_position=e,a='<li><input disabled="disabled" type="'+_+'" title="Select this choice as the default." class="choices_default_hidden" name="choices_default_hidden" id="choicedefhidden_'+choice_option_id+'" /><input disabled="disabled" type="text" value="'+choice_label.replace(/\"/g,"&quot;")+'" autocomplete="off" class="text" id="choicehidden_'+choice_option_id+'" /> <a href="#" class="unhide_choice" title="Unhide" id="choiceunhide_'+choice_option_id+'"><span class="icon-circle-up4"></span></a><a href="#" class="trash_choice" title="Remove Permanently" id="choicetrash_'+choice_option_id+'"><span class="icon-remove"></span></a></li>',i+=a)}),$("#element_choices_hidden li").remove(),$("#element_choices_hidden").append(i),$("#element_choices_hidden").show(),$("#toggle_hidden_choices").css("font-weight","bold")),!1}),$("#bulk_import_matrix_row").click(function(){return $("#bulk_insert_rows").val(""),"First Question"==$("#"+active_element+" table td.first_col").eq(0).text()&&"Second Question"==$("#"+active_element+" table td.first_col").eq(1).text()&&"Third Question"==$("#"+active_element+" table td.first_col").eq(2).text()&&"Fourth Question"==$("#"+active_element+" table td.first_col").eq(3).text()&&$("#bulk_insert_rows").val("New question 1\nNew question 2\nNew question 3"),$("#dialog-insert-matrix-rows").next().children().eq(1).addClass("negative_btn"),$("#dialog-insert-matrix-rows").dialog("open"),$("#bulk_insert_rows").focus(),!1}),$("#bulk_import_matrix_column").click(function(){return $("#bulk_insert_columns").val(""),"Answer A"==$("#"+active_element+" table thead th").eq(1).text()&&"Answer B"==$("#"+active_element+" table thead th").eq(2).text()&&"Answer C"==$("#"+active_element+" table thead th").eq(3).text()&&"Answer D"==$("#"+active_element+" table thead th").eq(4).text()&&$("#bulk_insert_columns").val("Answer E\nAnswer F\nAnswer G"),$("#dialog-insert-matrix-columns").next().children().eq(1).addClass("negative_btn"),$("#dialog-insert-matrix-columns").dialog("open"),$("#bulk_insert_columns").focus(),!1}),$("#element_choice_columns").bind("change",function(){set_properties("element_choice_columns",$(this).val())}),$("#prop_choice_limit_rule").bind("change",function(){set_properties("element_choice_limit_rule",$(this).val())}),$("#prop_choice_limit_qty").bind("keyup mouseout",function(){set_properties("element_choice_limit_qty",$(this).val())}),$("#prop_choice_limit_range_min").bind("keyup mouseout",function(){set_properties("element_choice_limit_range_min",$(this).val())}),$("#prop_choice_limit_range_max").bind("keyup mouseout",function(){set_properties("element_choice_limit_range_max",$(this).val())}),$("#element_range_min").bind("keyup mouseout",function(){set_properties("element_range_min",$(this).val())}),$("#element_range_max").bind("keyup mouseout",function(){set_properties("element_range_max",$(this).val())}),$("#element_range_limit_by").bind("change",function(){set_properties("element_range_limit_by",$(this).val())}),$("#element_range_number_limit_by").bind("change",function(){set_properties("element_range_limit_by",$(this).val())}),$("#element_type").bind("change",function(){set_properties("element_type_change",$(this).val())}),$("#element_size").bind("change",function(){set_properties("element_size",$(this).val())}),$("#name_format").bind("change",function(){set_properties("element_type",$(this).val())}),$("#phone_format").bind("change",function(){set_properties("element_type",$(this).val())}),$("#element_default_value,#element_default_value_text").bind("keyup mouseout",function(){set_properties("element_default_value",$(this).val())}),$("#element_default_phone1,#element_default_phone2,#element_default_phone3").bind("keyup mouseout",function(){set_properties("element_default_value",$("#element_default_phone1").val()+$("#element_default_phone2").val()+$("#element_default_phone3").val())}),$("#element_default_value_textarea").bind("keyup mouseout",function(){set_properties("element_default_value",$(this).val())}),$("#element_default_date").bind("keyup mouseout",function(){set_properties("element_default_value",$(this).val());var a=$("#"+active_element).data("field_properties");$.ajax({type:"POST",async:!0,url:"string_to_time.php",data:{default_date:$(this).val(),date_format:a.type},cache:!1,global:!1,dataType:"json",error:function(e,t,a){},success:function(e){var t;"ok"==e.status&&("date"==a.type?(t=e.default_date.split("-"),$("#element_"+a.id+"_1").val(t[1]),$("#element_"+a.id+"_2").val(t[0]),$("#element_"+a.id+"_3").val(t[2])):"europe_date"==a.type&&(t=e.default_date.split("-"),$("#element_"+a.id+"_1").val(t[0]),$("#element_"+a.id+"_2").val(t[1]),$("#element_"+a.id+"_3").val(t[2])))}})}),$("#element_default_time").bind("keyup mouseout",function(){set_properties("element_default_value",$(this).val());var t=$("#"+active_element).data("field_properties");$.ajax({type:"POST",async:!0,url:"string_to_time.php",data:{default_time:$(this).val(),time_24hour:t.time_24hour},cache:!1,global:!1,dataType:"json",error:function(e,t,a){},success:function(e){"ok"==e.status&&(e=e.default_time.split("-"),$("#element_"+t.id+"_1").val(e[0]),$("#element_"+t.id+"_2").val(e[1]),$("#element_"+t.id+"_3").val(e[2]),$("#element_"+t.id+"_4").val(e[3]))}})}),$("#prop_other_choices_label").bind("keyup mouseout",function(){set_properties("element_choice_other_label",$(this).val())}),$("#prop_choices_other_checkbox").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_choice_has_other",e)}),$("#prop_choices_randomize").bind("change",function(){var e=1==$(this).prop("checked")?"random":"";set_properties("constraint",e)}),$("#prop_text_as_password").bind("change",function(){var e=1==$(this).prop("checked")?"password":"";set_properties("constraint",e)}),$("#prop_encrypt_data").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_encrypted",e)}),$("#prop_enable_email_confirmation").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_email_enable_confirmation",e)}),$("#element_enable_placeholder,#element_enable_placeholder_text").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_enable_placeholder",e)}),$("#prop_section_email_display").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_section_display_in_email",e)}),$("#prop_section_size").bind("change",function(){set_properties("element_size",$(this).val())}),$("#prop_section_enable_scroll").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_section_enable_scroll",e)}),$("#prop_time_showsecond").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_time_showsecond",e)}),$("#prop_time_24hour").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_time_24hour",e)}),$("#element_countries").bind("change",function(){set_properties("element_default_value",$(this).val())}),$("#money_format").bind("change",function(){set_properties("constraint",$(this).val())}),$("#prop_address_hideline2").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_address_hideline2",e)}),$("#prop_address_us_only").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_address_us_only",e)}),$("#prop_date_range").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_date_enable_range",e)}),$("#prop_date_range_format_switcher").bind("change",function(){set_properties("element_date_range_format",$(this).val())}),$("#date_range_min_relative").bind("keyup mouseout",function(){var e=parseInt($(this).val());set_properties("element_date_range_min",e<0?("0000"+Math.abs(e)).slice(-4)+"-00-01":("0000"+e).slice(-4)+"-00-00")}),$("#date_range_max_relative").bind("keyup mouseout",function(){var e=parseInt($(this).val());set_properties("element_date_range_max",e<0?("0000"+Math.abs(e)).slice(-4)+"-00-01":("0000"+e).slice(-4)+"-00-00")}),$("#prop_date_selection_limit").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_date_enable_selection_limit",e)}),$("#prop_date_past_future_selection").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_date_disable_past_future",e)}),$("#date_selection_max").bind("keyup mouseout",function(){set_properties("element_date_selection_max",$(this).val())}),$("#prop_date_disable_specific").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_date_disable_specific",e)}),$("#date_disabled_list").bind("keyup mouseout",function(){set_properties("element_date_disabled_list",$(this).val())}),$("#prop_date_past_future").bind("change",function(){set_properties("date_past_future",$(this).val())}),$("#prop_date_disable_dayofweek").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_date_disable_dayofweek",e)}),$("input.dayofweek").bind("change",function(){var a=new Array;$("input.dayofweek").each(function(e){var t=$(this).attr("id").slice(-1);!0===$(this).prop("checked")&&a.push(t)}),set_properties("element_date_disabled_dayofweek_list",a.join(","))}),$("#date_type").bind("change",function(){set_properties("element_type",$(this).val())}),$("#linked_picker_range_min").datepick({onSelect:update_date_range_min_linked,showTrigger:"#date_range_min_pick_img"}),$("#date_range_min_mm,#date_range_min_dd,#date_range_min_yyyy").bind("blur mouseout",function(){var e=parseInt($("#date_range_min_dd").val(),10),t=parseInt($("#date_range_min_mm").val(),10)-1,a=parseInt($("#date_range_min_yyyy").val(),10);isNaN(e)||isNaN(t)||isNaN(a)||0==e||-1==t||($("#linked_picker_range_min").datepick("setDate",new Date(a,t,e)),set_properties("element_date_range_min",$("#date_range_min_yyyy").val()+"-"+$("#date_range_min_mm").val()+"-"+$("#date_range_min_dd").val()))}),$("#linked_picker_range_max").datepick({onSelect:update_date_range_max_linked,showTrigger:"#date_range_max_pick_img"}),$("#date_range_max_mm,#date_range_max_dd,#date_range_max_yyyy").bind("blur mouseout",function(){var e=parseInt($("#date_range_max_dd").val(),10),t=parseInt($("#date_range_max_mm").val(),10)-1,a=parseInt($("#date_range_max_yyyy").val(),10);isNaN(e)||isNaN(t)||isNaN(a)||0==e||-1==t||($("#linked_picker_range_max").datepick("setDate",new Date(a,t,e)),set_properties("element_date_range_max",$("#date_range_max_yyyy").val()+"-"+$("#date_range_max_mm").val()+"-"+$("#date_range_max_dd").val()))}),$("#date_disabled_list").datepick({multiSelect:999,multiSeparator:", ",showTrigger:"#date_disable_specific_pick_img",onClose:function(e){for(var t=e.length,a=0;a<t;a++)e[a]=$.datepick.formatDate("mm/dd/yyyy",e[a]);set_properties("element_date_disabled_list",e.join(", "))}}),$("#file_type_list").bind("keyup mouseout",function(){set_properties("element_file_type_list",$(this).val())}),$("#prop_file_as_attachment").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_file_as_attachment",e)}),$("#prop_file_auto_upload").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_file_auto_upload",e)}),$("#prop_file_multi_upload").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_file_enable_multi_upload",e)}),$("#file_max_selection").bind("keyup mouseout change",function(){set_properties("element_file_max_selection",$(this).val())}),$("#prop_file_limit_size").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_file_enable_size_limit",e)}),$("#file_size_max").bind("keyup mouseout",function(){set_properties("element_file_size_max",$(this).val())}),$("#prop_number_enable_quantity").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_number_enable_quantity",e)}),$("#prop_number_quantity_link").bind("change",function(){set_properties("element_number_quantity_link",$(this).val())}),$("#prop_submit_use_text").bind("click",function(){var e=1==$(this).prop("checked")?0:1;set_properties("submit_use_image",e)}),$("#prop_submit_use_image").bind("click",function(){var e=1==$(this).prop("checked")?1:0;set_properties("submit_use_image",e)}),$("#submit_primary_text").bind("keyup mouseout",function(){set_properties("submit_primary_text",$(this).val())}),$("#submit_secondary_text").bind("keyup mouseout",function(){set_properties("submit_secondary_text",$(this).val())}),$("#submit_primary_img").bind("keyup mouseout",function(){set_properties("submit_primary_img",$(this).val())}),$("#submit_secondary_img").bind("keyup mouseout",function(){set_properties("submit_secondary_img",$(this).val())}),$("#element_matrix_row").delegate("input.text","keyup",function(e){var t=$(this),a=t.attr("id").split("_")[1],i="&nbsp;",_=$("#"+active_element);13==e.keyCode?0==$("#element_matrix_row li.li_mr_temp_holder").length&&add_matrix_row(t):0==t.parent().hasClass("li_mr_temp_holder")&&(""!=t.val()&&(i=t.val()),$("#mr_"+a+" td.first_col").html(i),_.data("field_properties").options[a].row_title=t.val())}),$("#element_matrix_row").delegate("a.add_choice","click",function(e){var t=$(this);return 0==$("#element_matrix_row li.li_mr_temp_holder").length&&add_matrix_row(t),!1}),$("#element_matrix_row").delegate("a.del_choice","click",function(e){return delete_matrix_row($(this)),!1}),$("#element_matrix_column").delegate("input.text","keyup",function(e){var t=$(this),a=t.attr("id").split("_")[1],i="&nbsp;",_=$("#"+active_element),n=_.data("field_properties").id;13==e.keyCode?add_matrix_column(t):(""!=t.val()&&(i=t.val()),$("#mc_"+n+"_"+a).html(i),_.data("field_properties").options[n].column_data[a].column_title=t.val())}),$("#element_matrix_column").delegate("a.add_choice","click",function(e){return add_matrix_column($(this)),!1}),$("#element_matrix_column").delegate("a.del_choice","click",function(e){return delete_matrix_column($(this)),!1}),$("#prop_matrix_allow_multiselect").bind("change",function(){var e=1==$(this).prop("checked")?1:0;set_properties("element_matrix_allow_multiselect",e)}),$("#form_title").bind("keyup mouseout",function(){set_form_properties("form_title",$(this).val())}),$("#form_description").bind("keyup mouseout",function(){set_form_properties("form_description",$(this).val())}),$("#form_success_message_option").click(function(){set_form_properties("form_redirect_enable",0)}),$("#form_redirect_option").click(function(){set_form_properties("form_redirect_enable",1)}),$("#form_success_message").bind("keyup mouseout",function(){set_form_properties("form_success_message",$(this).val())}),$("#form_redirect_url").bind("keyup mouseout",function(){set_form_properties("form_redirect",$(this).val())}),$("#form_review,#form_resume,#form_allow_edit_completed_entry").bind("change",function(){var e=1==$(this).prop("checked")?1:0;"form_review"==$(this).attr("id")?set_form_properties("form_review",e):"form_resume"==$(this).attr("id")?set_form_properties("form_resume_enable",e):set_form_properties("entry_edit_enable",e)}),$("#form_resend_notifications").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").entry_edit_resend_notifications=1:$("#form_header").data("form_properties").entry_edit_resend_notifications=0}),$("#form_hide_editlink").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").entry_edit_hide_editlink=1:$("#form_header").data("form_properties").entry_edit_hide_editlink=0}),$("#form_reprocess_logics").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").entry_edit_rerun_logics=1:$("#form_header").data("form_properties").entry_edit_rerun_logics=0}),$("#form_disable_editing_enable").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").entry_edit_auto_disable=1:$("#form_header").data("form_properties").entry_edit_auto_disable=0}),$("#form_disable_editing_value").bind("keyup mouseout",function(){$("#form_header").data("form_properties").entry_edit_auto_disable_period=$(this).val()}),$("#form_disable_editing_period").bind("change",function(){$("#form_header").data("form_properties").entry_edit_auto_disable_unit=$(this).val()}),$("#form_review_title").bind("keyup mouseout",function(){set_form_properties("form_review_title",$(this).val())}),$("#form_review_description").bind("keyup mouseout",function(){set_form_properties("form_review_description",$(this).val())}),$("#form_review_use_text").click(function(){set_form_properties("form_review_use_image",0)}),$("#form_review_use_image").click(function(){set_form_properties("form_review_use_image",1)}),$("#review_primary_text").bind("keyup mouseout",function(){set_form_properties("review_primary_text",$(this).val())}),$("#review_primary_img").bind("keyup mouseout",function(){set_form_properties("review_primary_img",$(this).val())}),$("#review_secondary_text").bind("keyup mouseout",function(){set_form_properties("review_secondary_text",$(this).val())}),$("#review_secondary_img").bind("keyup mouseout",function(){set_form_properties("review_secondary_img",$(this).val())}),$("#form_resume_subject").bind("keyup mouseout",function(){set_form_properties("form_resume_subject",$(this).val())}),$("#form_resume_content").bind("keyup mouseout",function(){set_form_properties("form_resume_content",$(this).val())}),$("#form_resume_from_name").bind("keyup mouseout",function(){set_form_properties("form_resume_from_name",$(this).val())}),$("#form_resume_from_email_address").bind("keyup mouseout",function(){set_form_properties("form_resume_from_email_address",$(this).val())}),$("#form_password_option").bind("change",function(){$("#form_header").data("form_properties").password="",$("#form_password_data").val(""),1==$(this).prop("checked")?$("#form_password").slideDown():$("#form_password").fadeOut("slow")}),$("#form_password_data").bind("keyup mouseout",function(){set_form_properties("form_password",$(this).val())}),$("#form_captcha").bind("change",function(){$("#form_prop_captcha508").hide(),1==$(this).prop("checked")?("i"==$("#form_captcha_type").val()&&$("#form_prop_captcha508").show(),$("#form_header").data("form_properties").captcha=1,$("#form_captcha_type_option").slideDown()):($("#form_header").data("form_properties").captcha=0,$("#form_captcha_type_option").fadeOut("slow"))}),$("#form_captcha_type").bind("change",function(){$("#form_header").data("form_properties").captcha_type=$(this).val(),"i"==$(this).val()?$("#form_prop_captcha508").show():$("#form_prop_captcha508").hide()}),$("#form_unique_ip").bind("change",function(){1==$(this).prop("checked")?($("#form_unique_ip_div").slideDown(),$("#form_header").data("form_properties").unique_ip=1):($("#form_unique_ip_div").fadeOut("slow"),$("#form_header").data("form_properties").unique_ip=0)}),$("#form_unique_ip_maxcount").bind("keyup mouseout",function(){set_form_properties("form_unique_ip_maxcount",$(this).val())}),$("#form_unique_ip_period").bind("change",function(){$("#form_header").data("form_properties").unique_ip_period=$(this).val()}),$("#form_name_hide").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").name_hide=1:$("#form_header").data("form_properties").name_hide=0}),$("#form_limit_option").bind("change",function(){1==$(this).prop("checked")?($("#form_limit_div").slideDown(),$("#form_header").data("form_properties").limit_enable=1):($("#form_limit_div").fadeOut("slow"),$("#form_header").data("form_properties").limit_enable=0)}),$("#form_limit").bind("keyup mouseout",function(){set_form_properties("form_limit",$(this).val())}),$("#form_encryption_enable").bind("change",function(){return 1!=$(this).prop("checked")?($("#dialog-confirm-encryption-disable").dialog("open"),!1):1==$("#form_allow_edit_completed_entry").prop("checked")?($(this).prop("checked",!1),$("#ui-dialog-title-dialog-warning").html("Feature unavailable."),$("#dialog-warning-msg").html("This feature cannot be used when <strong>Allow Users to Edit Completed Submission</strong> is enabled on your form."),$("#dialog-warning").dialog("open"),!1):void $("#dialog-enable-data-encryption").dialog("open")}),$("#form_prop_toggle_a,#form_prop_toggle_img").click(function(){return"show more options"==$("#form_prop_toggle_a").text()?($("#form_prop_toggle_a").text("show less options"),$("#all_form_properties .advanced_prop").not("#form_prop_review").not("#form_prop_resume").show(),1==$("#form_review").prop("checked")&&$("#form_prop_review").show(),1==$("#form_resume").prop("checked")&&$("#form_prop_resume").show(),1==$("#form_allow_edit_completed_entry").prop("checked")&&$("#div_form_allow_edit_completed_entry").show(),adjust_main_height(),$("#form_prop_toggle_a").data("expand",1)):($("#form_prop_toggle_a").text("show more options"),$("#form_prop_review,#form_prop_resume,#div_form_allow_edit_completed_entry").hide(),$("#all_form_properties .advanced_prop").slideUp("slow",function(){adjust_main_height()}),$("#form_prop_toggle_a").data("expand",0)),!1}),$("#form_label_alignment").bind("change",function(){set_form_properties("form_label_alignment",$(this).val())}),$("#form_language").bind("change",function(){set_form_properties("form_language",$(this).val())}),$("#pagination_style_steps,#pagination_style_percentage,#pagination_style_disabled").bind("click",function(){var e,t=$(this).attr("id");"pagination_style_steps"==t?e="steps":"pagination_style_percentage"==t?e="percentage":"pagination_style_disabled"==t&&(e="disabled"),set_form_properties("form_pagination_type",e)}),$("#pagination_title_list").delegate("input.text","keyup",function(e){var t=$(this),a=t.attr("id").split("_"),i=parseInt(a[1]),_=i+1,n=$("#form_header").data("form_properties"),a=$("#form_builder_sortable > li.page_break"),n=n.pagination_type;"steps"==n?13==e.keyCode?$("#pagetitleinput_"+_).focus().select():$("#page_title_"+i).text(t.val()):"percentage"==n&&(13==e.keyCode?$("#pagetitleinput_"+_).focus().select():1==i&&$("#page_title_1").html("Page 1 of "+a.length+" - "+t.val())),a.eq(i-1).data("field_properties").page_title=t.val(),a.eq(i-1).removeClass("synched")}),$("#form_schedule_enable").bind("change",function(){1==$(this).prop("checked")?($("#form_header").data("form_properties").schedule_enable=1,$("#form_prop_scheduling_start").fadeIn(),$("#form_prop_scheduling_end").fadeIn()):($("#form_header").data("form_properties").schedule_enable=0,$("#form_prop_scheduling_start").fadeOut("slow"),$("#form_prop_scheduling_end").fadeOut("slow"))}),$("#linked_picker_scheduling_start").datepick({onSelect:update_scheduling_start_linked,showTrigger:"#scheduling_start_pick_img"}),$("#scheduling_start_mm,#scheduling_start_dd,#scheduling_start_yyyy").bind("blur mouseout",function(){var e=parseInt($("#scheduling_start_dd").val(),10),t=parseInt($("#scheduling_start_mm").val(),10)-1,a=parseInt($("#scheduling_start_yyyy").val(),10);isNaN(e)||isNaN(t)||isNaN(a)||0==e||-1==t||($("#linked_picker_scheduling_start").datepick("setDate",new Date(a,t,e)),e=$("#scheduling_start_yyyy").val()+"-"+$("#scheduling_start_mm").val()+"-"+$("#scheduling_start_dd").val(),$("#form_header").data("form_properties").schedule_start_date=e)}),$("#scheduling_start_hour,#scheduling_start_minute,#scheduling_start_ampm").bind("change",function(){$("#form_header").data("form_properties").schedule_start_hour=$("#scheduling_start_hour").val()+":"+$("#scheduling_start_minute").val()+":"+$("#scheduling_start_ampm").val()}),$("#linked_picker_scheduling_end").datepick({onSelect:update_scheduling_end_linked,showTrigger:"#scheduling_end_pick_img"}),$("#scheduling_end_mm,#scheduling_end_dd,#scheduling_end_yyyy").bind("blur mouseout",function(){var e=parseInt($("#scheduling_end_dd").val(),10),t=parseInt($("#scheduling_end_mm").val(),10)-1,a=parseInt($("#scheduling_end_yyyy").val(),10);isNaN(e)||isNaN(t)||isNaN(a)||0==e||-1==t||($("#linked_picker_scheduling_end").datepick("setDate",new Date(a,t,e)),e=$("#scheduling_end_yyyy").val()+"-"+$("#scheduling_end_mm").val()+"-"+$("#scheduling_end_dd").val(),$("#form_header").data("form_properties").schedule_end_date=e)}),$("#scheduling_end_hour,#scheduling_end_minute,#scheduling_end_ampm").bind("change",function(){$("#form_header").data("form_properties").schedule_end_hour=$("#scheduling_end_hour").val()+":"+$("#scheduling_end_minute").val()+":"+$("#scheduling_end_ampm").val()}),$("#form_custom_script_enable").bind("change",function(){1==$(this).prop("checked")?($("#form_header").data("form_properties").custom_script_enable=1,$("#form_custom_script_div").slideDown()):($("#form_header").data("form_properties").custom_script_enable=0,$("#form_custom_script_div").fadeOut("slow"))}),$("#form_custom_script_url").bind("keyup mouseout",function(){set_form_properties("form_custom_script_url",$(this).val())}),$("#form_approval_enable").bind("change",function(){1==$(this).prop("checked")?$("#form_header").data("form_properties").approval_enable=1:$("#form_header").data("form_properties").approval_enable=0}),$("#social a").click(function(){var e;switch($(this).attr("id")){case"a_single_line_text":e="text";break;case"a_number":e="number";break;case"a_paragraph_text":e="textarea";break;case"a_checkboxes":e="checkbox";break;case"a_multiple_choice":e="radio";break;case"a_drop_down":e="select";break;case"a_name":e="simple_name";break;case"a_date":e="date";break;case"a_time":e="time";break;case"a_phone":e="phone";break;case"a_address":e="address";break;case"a_website":e="url";break;case"a_price":e="money";break;case"a_email":e="email";break;case"a_section_break":e="section";break;case"a_file_upload":e="file";break;case"a_page_break":e="page_break";break;case"a_matrix":e="matrix";break;case"a_signature":e="signature";break;case"a_media":e="media";break;default:e="text"}return add_element(e),!1}),$("#dialog-message").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:600,draggable:!1,resizable:!1,position:["center","center"],open:function(){$(this).next().find("button").blur()},buttons:[{text:"Close",class:"bb_button bb_small bb_green",click:function(){$("#bottom_bar_loader").hide(),$("#bottom_bar_content").show(),$(this).dialog("close")}}]}),$("#dialog-warning").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:600,position:["center","center"],draggable:!1,resizable:!1,open:function(){$(this).next().find("button").blur()},buttons:[{text:"OK",class:"bb_button bb_small bb_green",click:function(){$(this).dialog("close")}}]}),$("#dialog-confirm-encryption-disable").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:550,resizable:!1,draggable:!1,position:["center","center"],buttons:[{text:"Yes. I Understand",id:"btn-confirm-encryption-disable-ok",class:"bb_button bb_small bb_green",click:function(){$("#form_header").data("form_properties").encryption_enable=0,$("#form_header").data("form_properties").encryption_public_key="",$("#form_encryption_enable").prop("checked",!1),$(this).dialog("close")}},{text:"Cancel",id:"btn-field-delete-cancel",class:"btn_secondary_action",click:function(){$("#form_header").data("form_properties").encryption_enable=1,$("#form_encryption_enable").prop("checked",!0),$(this).dialog("close")}}]}),$("#dialog-confirm-field-delete").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:550,resizable:!1,draggable:!1,position:["center","center"],open:function(){$("#btn-field-delete-ok").blur()},buttons:[{text:"Yes. Delete this field",id:"btn-field-delete-ok",class:"bb_button bb_small bb_green",click:function(){var i=$("#"+active_element),_=i.html(),e=$("#form_header").data("form_properties").id,t=$("#content").data("csrftoken");i.html('<img src="images/loader_small.gif" style="vertical-align: middle"/> deleting field ...').addClass("delete_processing"),$(this).dialog("close"),$.ajax({type:"POST",async:!0,url:"delete_live_field.php",data:{form_id:e,csrf_token:t,element_id:i.data("field_properties").id},cache:!1,global:!0,dataType:"json",error:function(e,t,a){i.html(_).removeClass("delete_processing")},success:function(e){if("ok"==e.status){if("media"==i.data("field_properties").type&&"video"==i.data("field_properties").media_type){var t=videojs("video_"+e.element_id);if(void 0!==t)try{t.dispose()}catch(e){}}$("#li_"+e.element_id).fadeOut("normal",function(){$(this).remove(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions")}),active_element=null,$("#selected_field_image").css("visibility","hidden"),$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),$("#builder_tabs").tabs("select",0)}else $(this).dialog("close"),i.html(_).removeClass("delete_processing"),$("#dialog-message").dialog("open")}})}},{text:"Cancel",id:"btn-field-delete-cancel",class:"btn_secondary_action",click:function(){$(this).dialog("close")}}]}),$("#dialog-confirm-choice-delete").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:550,resizable:!1,draggable:!1,position:["center","center"],open:function(){$("#btn-choice-delete-ok").blur()},buttons:[{text:"Yes. Delete Choice",id:"btn-choice-delete-ok",class:"bb_button bb_small bb_green",click:function(){var e=$("#dialog-confirm-choice-delete").data("current_choice_option_id"),i=$("#"+active_element),t=(i.data("field_properties").options[e].position,i.data("field_properties").id),a=i.data("field_properties").type,_=i.data("field_properties").options;delete _[e],i.data("field_properties").options=_,$("#choicetrash_"+e).parent().remove();var _=$("#element_choices input.text"),n=1;$.each(_,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position=n,n++}),$.each(i.data("field_properties").options,function(e,t){"1"==i.data("field_properties").options[e].is_hidden&&(i.data("field_properties").options[e].position=n,n++)}),"radio"==a||"checkbox"==a?$("#element_"+t+"_"+e).parent().remove():"select"==a&&$("#element_"+t+" option[value="+e+"]").remove();e=parseInt($("#hidden_choices_counter").text())-1;$("#hidden_choices_counter").text(e),0<e?$("#toggle_hidden_choices").show():($("#toggle_hidden_choices").hide(),$("#element_choices_hidden").hide(),$("#toggle_hidden_choices").css("font-weight","normal")),$(this).dialog("close")}},{text:"Cancel",id:"btn-field-delete-choice-cancel",class:"btn_secondary_action",click:function(){$(this).dialog("close")}}]}),$("#dialog-form-saved").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:450,resizable:!1,draggable:!1,position:["center","center"],open:function(){$("#btn-form-saved-ok").blur()},buttons:[{text:"Yes. Continue editing",id:"btn-form-saved-ok",class:"bb_button bb_small bb_green",click:function(){var e=$("#form_header").data("form_properties").id,t=(new Date).getTime();window.location.replace("edit_form.php?id="+e+"&t="+t)}},{text:"I'm finished",id:"btn-form-saved-cancel",class:"btn_secondary_action",click:function(){var e=$("#form_header").data("form_properties").id;1==$("#form_header").data("is_new_form")?window.location.replace("manage_forms.php?id="+e+"&hl=1&folder=1"):window.location.replace("manage_forms.php?id="+e)}}]}),$("#dialog-insert-choices").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:515,position:["center","center"],draggable:!1,resizable:!1,open:function(){$(this).next().find("button").blur()},buttons:[{text:"Add Choices",class:"bb_button bb_small bb_green",click:function(){var i,a,_,n,o,l,r,e,s;""==$("#bulk_insert_choices").val()?$(this).dialog("close"):(e=$("#bulk_insert_choices").val().split("\n"),i=$("#"+active_element),a=parseInt(i.data("field_properties").last_option_id)+1,_=0,$.each(i.data("field_properties").options,function(e,t){i.data("field_properties").options[e].position>_&&(_=i.data("field_properties").options[e].position)}),_++,n=i.data("field_properties").options,o="",l=i.data("field_properties").id,r=i.data("field_properties").type,$.each(e,function(e,t){n[a]={position:_,option:t,is_default:0,is_hidden:0,is_db_live:"0"},"radio"==r?o+='<span><input type="radio" value="1" class="element radio" name="element_'+l+'" id="element_'+l+"_"+a+'"><label for="element_'+l+"_"+a+'" class="choice">'+t+"</label></span>":"checkbox"==r?o+='<span><input type="checkbox" value="1" class="element checkbox" name="element_'+l+'" id="element_'+l+"_"+a+'"><label for="element_'+l+"_"+a+'" class="choice">'+t+"</label></span>":"select"==r&&(o+='<option value="'+a+'">'+t+"</option>"),a++,_++}),"radio"==r||"checkbox"==r?1==i.data("field_properties").choice_has_other?$("#element_"+l+"_other").parent().before(o):$("#li_"+l+" > div").append(o):"select"==r&&$("#element_"+l).append(o),i.data("field_properties").options=n,i.data("field_properties").last_option_id=a-1,e=$("#element_choices input.text"),s=1,$.each(e,function(e,t){var a=$(t).attr("id").split("_");i.data("field_properties").options[a[1]].position=s,s++}),$.each(i.data("field_properties").options,function(e,t){"1"==i.data("field_properties").options[e].is_hidden&&(i.data("field_properties").options[e].position=s,s++)}),$(this).dialog("close"),load_properties("#"+active_element))}},{text:"Cancel",class:"btn_secondary_action",click:function(){$(this).dialog("close")}}]}),$("#dialog-insert-matrix-rows").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:500,draggable:!1,resizable:!1,open:function(){$(this).next().find("button").blur()},position:["center","center"],buttons:[{text:"Add Rows",class:"bb_button bb_small bb_green",click:function(){var e,t,i,_,a,n;""==$("#bulk_insert_rows").val()||(e=$("#form_header").data("form_properties").id,t=$("#bulk_insert_rows").val().split("\n"),i=$("#"+active_element),_=$("#form_builder_sortable > li").not(".li_pagination").size()+1+$("#form_builder_sortable li.matrix table tr").length,a=$("#"+active_element+" table th").length,n='<tr id="mr_temp_'+_+'" class="matrix_row_processing"><td colspan="'+a+'"><img src="images/loader_small.gif" style="vertical-align: middle"/> creating new rows ...</td></tr>',$("#"+active_element+" table tbody").append(n),$.ajax({type:"POST",async:!0,url:"add_matrix_row.php",data:{form_id:e,row_holder_id:"mr_temp_"+_,allow_multiselect:i.data("field_properties").matrix_allow_multiselect,matrix_parent_id:i.data("field_properties").id,position:$("#"+active_element+" table tbody tr").length,total_column:a-1,column_data:i.data("field_properties").options[i.data("field_properties").id].column_data,rows_titles:t},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#mr_temp_"+_).remove()},success:function(e){var a;"ok"==e.status?(a=i.data("field_properties").options,$.each(e.new_row_data,function(e,t){a[e]=t}),i.data("field_properties").options=a,$("#"+e.row_holder_id).replaceWith(e.new_row_markup),load_properties("#"+active_element)):($("#dialog-message").dialog("open"),$("#mr_temp_"+_).remove())}})),$(this).dialog("close")}},{text:"Cancel",class:"btn_secondary_action",click:function(){$(this).dialog("close")}}]}),$("#dialog-insert-matrix-columns").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,draggable:!1,resizable:!1,open:function(){$(this).next().find("button").blur()},width:515,position:["center","center"],buttons:[{text:"Add Columns",class:"bb_button bb_small bb_green",click:function(){var e,t,a,i,_,n,o,l,r,s,d,p,m,c,u,h;""==$("#bulk_insert_columns").val()||($("#form_header").data("form_properties").id,e=$("#"+active_element+" table th").length,t=$("#bulk_insert_columns").val().split("\n"),a=$("#"+active_element),i=a.data("field_properties").id,_=parseInt(a.data("field_properties").last_option_id)+1,n=_,a.data("field_properties").last_option_id=_+t.length-1,o="",l=_,$.each(t,function(e,t){o+='<th scope="col" id="mc_'+i+"_"+l+'">'+t+"</th>",l++}),$("#"+active_element+" table thead tr").append(o),r="",r=1==a.data("field_properties").matrix_allow_multiselect?"checkbox":"radio",s=new Array,p=d="",$("#"+active_element+" table tbody").find("tr").each(function(){s=$(this).attr("id").split("_"),d=s[1],p="",l=_,$.each(t,function(e,t){p+='<td><input type="'+r+'" value="'+l+'" name="element_'+d+'" id="element_'+d+"_"+l+'"></td>',l++}),_++,$(this).append(p)}),m=2*(100/(c=$("#"+active_element+" table th").length)),c=(100-(m=Math.round(m)))/(c-1),c=Math.round(c),$("#"+active_element+" table th:eq(0)").css("width",m+"%"),$("#"+active_element+" table th:gt(0)").css("width",c+"%"),u=a.data("field_properties").options[i].column_data,h=e,$.each(t,function(e,t){u[n]={column_title:t,is_db_live:0,position:h},h++,n++}),a.data("field_properties").options[i].column_data=u,load_properties("#"+active_element)),$(this).dialog("close")}},{text:"Cancel",class:"btn_secondary_action",click:function(){$(this).dialog("close")}}]}),$("#dialog-enable-data-encryption").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:500,position:["center",100],draggable:!1,resizable:!1,buttons:[{text:"Generate Encryption Keys",id:"dialog-enable-data-encryption-btn-ok",class:"bb_button bb_small bb_green",click:function(){var e=$("#form_header").data("form_properties").id,t=$("#content").data("csrftoken");$("#dialog-enable-data-encryption-btn-ok").prop("disabled",!0),$("#dialog-enable-data-encryption-btn-cancel").hide(),$("#dialog-enable-data-encryption-btn-ok").text("Generating keys..."),$("#dialog-enable-data-encryption-btn-ok").after("<div class='small_loader_box'><img src='images/loader_small_grey.gif' /></div>"),$.ajax({type:"POST",async:!0,url:"encryption_generate_keypair.php",data:{form_id:e,csrf_token:t},cache:!1,global:!1,dataType:"json",error:function(e,t,a){$("#dialog-enable-data-encryption").dialog("close"),$("#dialog-enable-data-encryption-btn-ok").prop("disabled",!1),$("#dialog-enable-data-encryption-btn-cancel").show(),$("#dialog-enable-data-encryption-btn-ok").text("Generate Encryption Keys"),$("#dialog-enable-data-encryption-btn-ok").next().remove(),alert("Error! Unable to generate encryption keys. \nError message: "+e.responseText)},success:function(e){$("#dialog-enable-data-encryption").dialog("close"),$("#dialog-enable-data-encryption-btn-ok").prop("disabled",!1),$("#dialog-enable-data-encryption-btn-cancel").show(),$("#dialog-enable-data-encryption-btn-ok").text("Generate Encryption Keys"),$("#dialog-enable-data-encryption-btn-ok").next().remove(),"ok"==e.status&&($("#form_header").data("form_properties").encryption_enable=1,$("#form_header").data("form_properties").encryption_public_key=e.public_key,$("#dialog-enable-encryption-private-key").val(e.private_key),$("#dialog-enable-data-encryption-success").dialog("open"))}})}},{text:"Cancel",id:"dialog-enable-data-encryption-btn-cancel",class:"btn_secondary_action",click:function(){$("#form_header").data("form_properties").encryption_enable=0,$("#form_encryption_enable").prop("checked",!1),$(this).dialog("close")}}]}),$("#dialog-enable-data-encryption-success").dialog({modal:!0,autoOpen:!1,closeOnEscape:!1,width:500,position:["center","center"],open:function(){$("#dialog-enable-encryption-private-key").focus().select()},draggable:!1,resizable:!1,buttons:[{text:"I Understand. Continue",id:"dialog-enable-data-encryption-success-btn-ok",class:"bb_button bb_small bb_green",click:function(){$(this).dialog("close")}}]}),$(document).ajaxError(function(e,t,a,i){$("#dialog-message").dialog("open")}),$("#social li").draggable({connectToSortable:"#form_builder_sortable",helper:"clone",revert:"invalid",revertDuration:300,addClasses:!0}),$("#form_builder_sortable li").not(".li_pagination").addClass("synched dblive"),$("#bottom_bar_duplicate_field").click(function(){var e=$("#form_builder_sortable > li").not(".li_pagination").size()+1;$('<li id="li_temp_'+e+'" class="duplicate_processing"><img src="images/loader_small.gif" style="vertical-align: middle"/> duplicating field ...</li>').insertAfter("#"+active_element).hide().fadeIn();var t=$("#form_header").data("form_properties").id,a=$("#"+active_element).data("field_properties"),i=a.position+1;return $.ajax({type:"POST",async:!0,url:"add_field.php",data:{element_type:a.type,form_id:t,holder_id:"li_temp_"+e,position:i,action:"duplicate",field_properties:a},cache:!1,global:!0,dataType:"json",error:function(e,t,a){$("#form_builder_sortable .duplicate_processing").remove()},success:function(e){var t;"ok"==e.status?((t=$(e.markup)).data("field_properties",e.field_properties),$("#"+e.holder_id).replaceWith(t),"section"==t.data("field_properties").type?$("#li_"+e.element_id+" > h3").html($("#li_"+e.element_id+" > h3").html().replace(/\n/g,"<br />")):"media"==t.data("field_properties").type?($("#li_"+e.element_id+" > h3").html($("#li_"+e.element_id+" > h3").html().replace(/\n/g,"<br />")),"video"==t.data("field_properties").media_type&&videojs("video_"+e.element_id)):"page_break"==t.data("field_properties").type||"matrix"==t.data("field_properties").type||(0<$("#li_"+e.element_id+" > label").length?$("#li_"+e.element_id+" > label").html($("#li_"+e.element_id+" > label").html().replace(/\n/g,"<br />")):0<$("#li_"+e.element_id+" > span.description").length&&$("#li_"+e.element_id+" > span.description").html($("#li_"+e.element_id+" > span.description").html().replace(/\n/g,"<br />"))),$("#li_"+e.element_id).hide().fadeIn(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions")):($("#dialog-message").dialog("open"),$("#form_builder_sortable .duplicate_processing").remove())}}),!1}),$("#bottom_bar_delete_field").click(function(){var i,e,_=$("#"+active_element);return $("#form_builder_sortable > li").not(".li_pagination").not(".page_break").size()<=1?($("#ui-dialog-title-dialog-warning").html("Unable to delete this field!"),$("#dialog-warning-msg").html("You can't delete all fields in your form! <br />You must have at least 1 field."),$("#dialog-warning").dialog("open")):("page_break"==_.data("field_properties").type&&(_.data("field_properties").is_db_live=0),0==_.data("field_properties").is_db_live?(i=_.html(),e=$("#form_header").data("form_properties").id,_.html('<img src="images/loader_small.gif" style="vertical-align: middle"/> deleting field ...').addClass("delete_processing"),$.ajax({type:"POST",async:!0,url:"delete_draft_field.php",data:{form_id:e,element_id:_.data("field_properties").id,element_type:_.data("field_properties").type},cache:!1,global:!0,dataType:"json",error:function(e,t,a){_.html(i).removeClass("delete_processing")},success:function(e){if("ok"==e.status){if("media"==_.data("field_properties").type&&"video"==_.data("field_properties").media_type){var t=videojs("video_"+e.element_id);if(void 0!==t)try{t.dispose()}catch(e){}}$("#li_"+e.element_id).fadeOut("normal",function(){$(this).remove(),reorganize_page_break(),$("#form_builder_sortable").sortable("refreshPositions")}),active_element=null,$("#selected_field_image").css("visibility","hidden"),$("#bottom_bar_field_action").fadeOut("fast",function(){$("#bottom_bar_content").animate({"margin-left":"225px"},{duration:200,queue:!1})}),$("#builder_tabs").tabs("select",0)}else _.html(i).removeClass("delete_processing"),$("#dialog-message").dialog("open")}})):$("#dialog-confirm-field-delete").dialog("open")),!1}),$("#bottom_bar").fadeIn(),$("#editor_loading").fadeOut("slow"),$(window).on("beforeunload",function(){return!0===$(".form_editor").data("form_saved")?null:"Your changes haven't been saved! \nLeaving this page will discard all changes."}),window.setTimeout(function e(){var t=$("#form_header").data("form_properties").id;$.ajax({type:"POST",async:!0,url:"ping.php",data:{form_id:t},cache:!1,global:!0,dataType:"json",complete:function(){setTimeout(e,3e5)}})},3e5),is_support_html5_uploader()?$("#element_image_file_uploader").uploadifive({uploadScript:"upload_form_images.php",buttonText:"Select Image",removeCompleted:!0,formData:{session_id:$("#form_header").data("session_id"),form_id:0},auto:!0,multi:!1,onUploadError:function(e,t,a,i){alert("The file "+e.name+" could not be uploaded: "+i)},onAddQueueItem:function(e){var t=$("#form_header").data("form_properties").id;$(this).data("uploadifive").settings.formData={session_id:$("#form_header").data("session_id"),form_id:t}},onUploadComplete:function(e,t){var a,i=!1;try{var _=jQuery.parseJSON(t),i=!0}catch(e){i=!1,alert(t)}1==i&&"ok"==_.status?($("#element_image_src").val(_.image_url),$("#div_image_src").show(),$("#element_image_set_url").prop("checked",!0),$("#element_image_width").val(_.image_width),$("#element_image_height").val(_.image_height),$("#element_image_width").data("original-image-width",_.image_width),$("#element_image_height").data("original-image-height",_.image_height),(a=$("#"+active_element).data("field_properties")).media_image_src=_.image_url,a.media_image_width=_.image_width,a.media_image_height=_.image_height,a='<div class="media_image_container"><img src="'+_.image_url+'" width="'+_.image_width+'" height="'+_.image_height+'" alt="" title="" class="media_image" /></div>',$("#"+active_element+" .media_icon").remove(),$("#"+active_element+" .media_image_container").remove(),$("#"+active_element).append(a)):alert("Error uploading image. Please try again.")}}):$("#div_image_upload_file").hide(),$("#element_image_upload_file").bind("click",function(){1==$(this).prop("checked")&&($("#div_image_src").hide(),$("#div_image_upload_file").show())}),$("#element_image_set_url").bind("click",function(){1==$(this).prop("checked")&&($("#div_image_src").show(),$("#div_image_upload_file").hide())}),$("#element_image_ratio_lock .icon-font").bind("click",function(){return $(this).hasClass("icon-lock5")?($(this).removeClass("icon-lock5").addClass("icon-unlocked"),$(".image-lock-ratio").css("border-bottom","none")):($(this).removeClass("icon-unlocked").addClass("icon-lock5"),$(".image-lock-ratio").css("border-bottom","2px solid #3D6C10")),!1}),$("#element_image_width").bind("keyup",function(){var e,t=parseInt($(this).val());$("#"+active_element).data("field_properties").media_image_width=t,$("#"+active_element+" .media_image").css("width",t),$("#"+active_element+" .media_image").css("height",parseInt($("#element_image_height").val())),$("#element_image_ratio_lock .icon-font").hasClass("icon-lock5")&&(e=parseInt($("#element_image_width").data("original-image-width")),e=t*(parseInt($("#element_image_height").data("original-image-height"))/e),isNaN(e)?($("#element_image_height").val(""),$("#"+active_element).data("field_properties").media_image_height=""):($("#element_image_height").val(parseInt(e)),$("#"+active_element).data("field_properties").media_image_height=e,$("#"+active_element+" .media_image").css("height",e)))}),$("#element_image_height").bind("keyup",function(){var e,t=parseInt($(this).val());$("#"+active_element).data("field_properties").media_image_height=t,$("#"+active_element+" .media_image").css("height",t),$("#"+active_element+" .media_image").css("width",parseInt($("#element_image_width").val())),$("#element_image_ratio_lock .icon-font").hasClass("icon-lock5")&&(e=parseInt($("#element_image_width").data("original-image-width")),t=parseInt($("#element_image_height").data("original-image-height")),t=parseInt($(this).val())*(e/t),isNaN(t)?($("#element_image_width").val(""),$("#"+active_element).data("field_properties").media_image_width=""):($("#element_image_width").val(parseInt(t)),$("#"+active_element).data("field_properties").media_image_width=t,$("#"+active_element+" .media_image").css("width",t)))}),$("#element_image_src").bind("keyup",function(){var e=$(this).val();if(0==($("#"+active_element).data("field_properties").media_image_src=e).length)return!0;e='<div class="media_image_container"><img src="'+e+'" width="'+$("#"+active_element).data("field_properties").media_image_width+'" height="'+$("#"+active_element).data("field_properties").media_image_height+'" alt="" title="" class="media_image" /></div>';$("#"+active_element+" .media_icon").remove(),$("#"+active_element+" .media_image_container").remove(),$("#"+active_element).append(e)}),$("#element_pdf_src").bind("keyup",function(){var e=$(this).val();$("#"+active_element).data("field_properties").media_pdf_src=e;$("#"+active_element+" .media_icon").remove(),$("#"+active_element+" .media_pdf_container").remove(),$("#"+active_element).append('<p class="media_icon"><span class="icon-file-pdf"></span></p><p class="media_pdf_container media_pdf_preview_unavailable"><span style="font-size:150%" class="icon-info"></span> PDF Preview Unavailable in Edit Mode.</p>')}),$("#element_image_alignment_left,#element_image_alignment_center,#element_image_alignment_right").bind("click",function(){var e=$(this).attr("id");$("#"+active_element+" .media_image_container").removeClass("media_image_left media_image_center media_image_right"),"element_image_alignment_left"==e?($("#"+active_element).data("field_properties").media_image_alignment="l",$("#"+active_element+" .media_image_container").addClass("media_image_left")):"element_image_alignment_center"==e?($("#"+active_element).data("field_properties").media_image_alignment="c",$("#"+active_element+" .media_image_container").addClass("media_image_center")):"element_image_alignment_right"==e&&($("#"+active_element).data("field_properties").media_image_alignment="r",$("#"+active_element+" .media_image_container").addClass("media_image_right"))}),$("#element_media_image_alt").bind("keyup mouseout",function(){$("#"+active_element).data("field_properties").media_image_alt=$(this).val()}),$("#element_media_image_href").bind("keyup mouseout",function(){$("#"+active_element).data("field_properties").media_image_href=$(this).val()}),$("#element_media_display_in_email").bind("change",function(){var e=1==$(this).prop("checked")?1:0;$("#"+active_element).data("field_properties").media_display_in_email=e}),$("#element_media_video_src").bind("keyup",function(){$("#"+active_element).data("field_properties").media_video_src=$(this).val();var e=$("#"+active_element).data("field_properties"),t=e.id,a="";"1"==e.media_video_muted&&(a="muted");var i="",_=document.createElement("a");_.href=e.media_video_src,i="www.youtube.com"==_.hostname||"youtube.com"==_.hostname||"youtu.be"==_.hostname?"video/youtube":"video/mp4",0==$("#"+active_element+" .media_video_container").length&&(a='<div class="media_video_container '+e.media_video_size+'"><video id="video_'+t+'" class="video-js vjs-default-skin vjs-fluid" controls '+a+'  preload="auto" aspectRatio="16:9" width="640" height="264" data-setup=\'{ "techOrder": ["youtube","html5"], "sources": [{ "type": "'+i+'", "src": "'+e.media_video_src+"\"}] }' > </video>",$("#"+active_element+" .media_icon").remove(),$("#"+active_element+" .media_image_container").remove(),$("#"+active_element).append(a)),void 0===videojs("video_"+t)?videojs("video_"+t):(videojs("video_"+t).src({type:i,src:e.media_video_src}),setTimeout(function(){videojs("video_"+t).poster(videojs("video_"+t).tech_.poster())},2e3))}),$("#element_media_video_caption_file").bind("keyup mouseout",function(){$("#"+active_element).data("field_properties").media_video_caption_file=$(this).val()}),$("#element_media_video_size_small,#element_media_video_size_medium,#element_media_video_size_large").bind("click",function(){var e=$(this).attr("id");$("#"+active_element+" .media_video_container").removeClass("small medium large"),"element_media_video_size_small"==e?($("#"+active_element).data("field_properties").media_video_size="small",$("#"+active_element+" .media_video_container").addClass("small")):"element_media_video_size_medium"==e?($("#"+active_element).data("field_properties").media_video_size="medium",$("#"+active_element+" .media_video_container").addClass("medium")):"element_media_video_size_large"==e&&($("#"+active_element).data("field_properties").media_video_size="large",$("#"+active_element+" .media_video_container").addClass("large"))}),$("#element_media_video_muted").bind("change",function(){var e=1==$(this).prop("checked")?1:0;$("#"+active_element).data("field_properties").media_video_muted=e}),$("#element_media_video_enable_caption").bind("change",function(){1==$(this).prop("checked")?$("#div_video_caption_file").show():($("#div_video_caption_file").hide(),$("#"+active_element).data("field_properties").media_video_caption_file="",$("#element_media_video_caption_file").val(""))}),is_support_html5_uploader()?$("#element_pdf_file_uploader").uploadifive({uploadScript:"upload_form_pdf.php",buttonText:"Select PDF",removeCompleted:!0,formData:{session_id:$("#form_header").data("session_id"),form_id:0},auto:!0,multi:!1,onUploadError:function(e,t,a,i){alert("The file "+e.name+" could not be uploaded: "+i)},onAddQueueItem:function(e){var t=$("#form_header").data("form_properties").id;$(this).data("uploadifive").settings.formData={session_id:$("#form_header").data("session_id"),form_id:t}},onUploadComplete:function(e,t){var a=!1;try{var i=jQuery.parseJSON(t),a=!0}catch(e){a=!1,alert(t)}1==a&&"ok"==i.status?($("#element_pdf_src").val(i.pdf_url),$("#div_pdf_src").show(),$("#element_pdf_set_url").prop("checked",!0),$("#"+active_element).data("field_properties").media_pdf_src=i.pdf_url):alert("Error uploading PDF file. Please try again.")}}):$("#div_pdf_upload_file").hide(),$("#element_pdf_upload_file").bind("click",function(){1==$(this).prop("checked")&&($("#div_pdf_src").hide(),$("#div_pdf_upload_file").show())}),$("#element_pdf_set_url").bind("click",function(){1==$(this).prop("checked")&&($("#div_pdf_src").show(),$("#div_pdf_upload_file").hide())}),$("#element_pdf_size_small,#element_pdf_size_medium,#element_pdf_size_large").bind("click",function(){var e=$(this).attr("id");"element_pdf_size_small"==e?$("#"+active_element).data("field_properties").size="small":"element_pdf_size_medium"==e?$("#"+active_element).data("field_properties").size="medium":"element_pdf_size_large"==e&&($("#"+active_element).data("field_properties").size="large")})});